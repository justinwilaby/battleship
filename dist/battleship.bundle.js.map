{"version":3,"sources":["webpack:///webpack/bootstrap b94b74131e175c482538","webpack:///./src/js/index.js","webpack:///./src/js/main.scss?e92f","webpack:///./src/js/main.scss","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/js/board/Board.js","webpack:///./src/js/board/BoardGraphic.js","webpack:///./src/js/board/board.scss?4901","webpack:///./src/js/board/board.scss","webpack:///./src/js/ship/Ship.js","webpack:///./src/js/ship/ShipGraphic.js","webpack:///./~/svg-path-interpolator/src/math/SVGTransform.js","webpack:///./~/svg-path-interpolator/src/math/utils.js","webpack:///./src/js/ship/ship.scss?177e","webpack:///./src/js/ship/ship.scss","webpack:///./src/js/utils/findNodeAtPoint.js","webpack:///./src/js/utils/alignElementToCell.js","webpack:///./src/js/utils/findCells.js","webpack:///./src/js/utils/getCell.js","webpack:///./src/js/utils/findCellAtPoint.js","webpack:///./src/js/utils/getMoreCellsFromCell.js","webpack:///./src/js/gameplay/GamePlay.js","webpack:///./src/js/utils/getHitInfo.js","webpack:///./src/js/gameplay/Computer.js","webpack:///./src/js/gameplay/Player.js","webpack:///./src/js/utils/randomizeShips.js","webpack:///./src/js/gameplay/Human.js","webpack:///./src/js/model/PlayerModel.js","webpack:///./src/js/enum/ShipTypeEnum.js","webpack:///./src/js/model/ShipModel.js","webpack:///../../src/utils.js","webpack:///../../src/index.js","webpack:///./src/js/utils/animateBoardRender.js"],"names":["player1","player2","board","document","body","appendChild","render","grids","boardGraphic","forEach","grid","game","startButton","getElementById","addEventListener","startGame","module","exports","list","toString","result","i","length","item","push","join","modules","mediaQuery","alreadyImportedModules","id","Board","shipDragStartCallback","bind","shipDragCallback","shipDropCallback","shipModelChangeListener","shipModelPreCommitListener","Object","assign","element","postRenderActions","visibleShipsMap","shipModel","ship","dragStartCallback","dragCallback","dropCallback","addChangeListener","addPreCommitListener","originEvent","cells","occupiedCells","occupiedCellsSet","delete","cell","setHighlightedCells","segment","direction","validDrop","type","size","has","color","cellsToOccupy","lastHighlightedCells","concat","changes","newValue","allowChange","setTimeout","occupiedCellsChanged","shipDirectionChanged","get","seed","shipGraphic","querySelector","seedBounds","getBoundingClientRect","left","top","oldValue","add","style","fill","_boardGraphic","ships","BoardGraphic","Map","rendered","fragment","createDocumentFragment","index","translate","set","player1Grid","createElementNS","setAttribute","g","gridSize","path","clone","cloneNode","player2Grid","renderShips","_element","createElement","Ship","draggable","elementMouseDownHandler","bodyMouseUpHandler","bodyMouseMoveHandler","rotateArrowClickHandler","modelChangeHandler","deltaTx","deltaTy","animate","m_transform","transform","animationFrame","cancelAnimationFrame","distance","Math","sqrt","pow","d","lastX","lastY","tick","progress","newTx","newTy","requestAnimationFrame","event","target","rotateArrow","pageX","pageY","shipSegments","lastMouseEvent","lastGoodTransform","buttons","lastPageX","lastPageY","deltaX","deltaY","removeEventListener","source","directionChanged","hitsChanged","hits","deg","rotate","x1","y1","x2","y2","x","y","console","log","_shipGraphic","_shipModel","value","removeChangeListener","_draggable","removeAttribute","ShipGraphic","_shipSegments","innerHTML","hit","rect","text","textContent","querySelectorAll","_roateArrow","degToRads","require","radToDeg","SVGTransform","a","b","c","e","f","setMatrix","determinant","det","isIdentityOrTranslation","other","trans","om_transform","tm_transform","degrees","translateFlag","Boolean","undefined","rads","cosAngle","cos","sinAngle","sin","rot","multiply","sx","sy","tx","ty","atan2","scale","angleX","angleY","shear","tan","angle","point","map","isFinite","PI","rad","isNullOrUndefined","rotatePoint","originX","originY","radiansX","radiansY","v","vx","vy","findNodeAtPoint","nodeList","len","width","height","alignElementToCell","gridRect","parentElement","cellRect","offsetHeight","offsetWidth","findCells","shipSegment","shipSegmentRect","boardRect","rowNum","colNum","colCursor","rowCursor","thisSegment","nodeName","nextSibling","previousSibling","unshift","getCell","row","col","children","findCellAtPoint","cellPt","isNaN","getMoreCellsFromCell","n","pt","axis","targetCell","playerModelChangeHandler","incomingShots","hitInfo","GamePlay","human","computer","_player1","_player2","getHitInfo","playerModel","playerShips","outer","j","Computer","args","allyGrid","Player","opponentGrid","playerModelChanged","randomizeShips","floor","random","clear","shipModels","findUnusedCells","getRandomStartPoint","Human","generateDefaultShips","maxAllowed","PlayerModel","Set","_ships","allShipTypes","ShipTypeEnum","name","isFrozen","Error","freeze","CORVETE","FRIGATE","DESTROYER","CARRIER","ShipModel","animateBoard","boardElement","cellSize","colCt","paths","delay"],"mappings":"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CA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;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","file":"battleship.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b94b74131e175c482538","import \"./main.scss\";\r\nimport Board from './board/Board';\r\nimport GamePlay from './gameplay/GamePlay';\r\nimport PlayerModel from './model/PlayerModel';\r\nimport {animateBoard} from './utils/animateBoardRender';\r\nconst player1 = new PlayerModel();\r\nconst player2 = new PlayerModel();\r\nconst board = new Board(player1, player2);\r\ndocument.body.appendChild(board.render());\r\nconst grids = board.boardGraphic.grids;\r\ngrids.forEach(grid =>{\r\n    animateBoard(grid, 50, 10)\r\n});\r\nlet game = new GamePlay(grids, player1, player2);\r\n\r\nconst startButton = document.getElementById('start');\r\nstartButton.addEventListener('click', ()=>{\r\n    game.startGame();\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/index.js!./main.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/index.js!./main.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/index.js!./main.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/main.scss\n// module id = 1\n// module chunks = 0","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"body {\\n  background: #333;\\n  overflow: hidden;\\n  padding: 0;\\n  margin: 0;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none; }\\n\\n#battleshipBoard {\\n  position: absolute;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  width: 100%;\\n  height: 800px; }\\n\\n#start {\\n  position: absolute;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  top: 50%;\\n  z-index: 9999; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader!./src/js/main.scss\n// module id = 2\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 4\n// module chunks = 0","import BoardGraphic from './BoardGraphic';\r\nimport {findCells} from '../utils/findCells';\r\nimport {findCellAtPoint} from '../utils/findCellAtPoint';\r\nimport {getMoreCellsFromCell} from '../utils/getMoreCellsFromCell';\r\n\r\nclass Board {\r\n\r\n    lastHighlightedCells = [];\r\n    validDrop = false;\r\n    player1;\r\n    player2;\r\n\r\n    constructor(player1, player2) {\r\n        this.shipDragStartCallback = this.shipDragStartCallback.bind(this);\r\n        this.shipDragCallback = this.shipDragCallback.bind(this);\r\n        this.shipDropCallback = this.shipDropCallback.bind(this);\r\n        this.shipModelChangeListener = this.shipModelChangeListener.bind(this);\r\n        this.shipModelPreCommitListener = this.shipModelPreCommitListener.bind(this);\r\n\r\n        Object.assign(this, {player1, player2});\r\n    }\r\n\r\n    get boardGraphic() {\r\n        if (!this._boardGraphic) {\r\n            this._boardGraphic = new BoardGraphic(this.player1.ships);\r\n        }\r\n        return this._boardGraphic;\r\n    }\r\n\r\n    render() {\r\n        const element = this.boardGraphic.render();\r\n        this.postRenderActions();\r\n        return element;\r\n    }\r\n\r\n    postRenderActions() {\r\n        this.boardGraphic.visibleShipsMap.forEach(ship => {\r\n            const shipModel = ship.shipModel;\r\n            ship.dragStartCallback = this.shipDragStartCallback;\r\n            ship.dragCallback = this.shipDragCallback;\r\n            ship.dropCallback = this.shipDropCallback;\r\n            shipModel.addChangeListener(this.shipModelChangeListener);\r\n            shipModel.addPreCommitListener(this.shipModelPreCommitListener);\r\n        });\r\n    }\r\n\r\n    //----------------------------------------\r\n    // Ship drag callbacks\r\n    //----------------------------------------\r\n\r\n    shipDragStartCallback(originEvent, ship) {\r\n        const cells = ship.shipModel.occupiedCells || [];\r\n        if (!cells.length) {\r\n            return;\r\n        }\r\n        cells.forEach(cell => {\r\n            this.player1.occupiedCellsSet.delete(cell);\r\n        });\r\n        this.setHighlightedCells(cells, '#00ff00');\r\n    }\r\n\r\n    shipDragCallback(originEvent, ship) {\r\n        const cells = findCells(ship.segment, this.boardGraphic.grids[0], ship.shipModel.direction);\r\n        let i = cells.length;\r\n        this.validDrop = i === ship.shipModel.type.size;\r\n        while (i--) {\r\n            if (this.player1.occupiedCellsSet.has(cells[i])) {\r\n                this.validDrop = false;\r\n                break;\r\n            }\r\n        }\r\n        const color = this.validDrop ? '#00ff00' : '#ff0000';\r\n        this.setHighlightedCells(cells, color);\r\n    }\r\n\r\n    shipDropCallback(originEvent, ship) {\r\n        let cellsToOccupy = this.lastHighlightedCells;\r\n        this.setHighlightedCells([]);\r\n        if (!cellsToOccupy.length) {\r\n            return;\r\n        }\r\n        if (!this.validDrop) {\r\n            cellsToOccupy = ship.shipModel.occupiedCells || [];\r\n        }\r\n        ship.shipModel.occupiedCells = cellsToOccupy.concat();\r\n    }\r\n\r\n    //----------------------------------\r\n    // Model Change callbacks\r\n    shipModelPreCommitListener(shipModel, changes) {\r\n        if (!('direction' in changes)) {\r\n            return;\r\n        }\r\n        const cells = getMoreCellsFromCell(this.boardGraphic.grids[0], shipModel.occupiedCells[0], changes.direction.newValue, shipModel.type.size);\r\n        let i = ~~cells.length;\r\n        let allowChange = !i || i === shipModel.type.size;\r\n        while (allowChange && i-- > 1) {\r\n            if (this.player1.occupiedCellsSet.has(cells[i])) {\r\n                allowChange = false;\r\n            }\r\n        }\r\n\r\n        if (!allowChange && cells.length) {\r\n            this.setHighlightedCells(cells, '#ff0000');\r\n            setTimeout(() => {\r\n                this.setHighlightedCells([]);\r\n            }, 500);\r\n        }\r\n        if (!allowChange){\r\n            debugger;\r\n        }\r\n        return allowChange;\r\n    }\r\n\r\n    shipModelChangeListener(shipModel, changes) {\r\n        if ('occupiedCells' in changes) {\r\n            this.occupiedCellsChanged(changes);\r\n        }\r\n        else if ('direction' in changes) {\r\n            this.shipDirectionChanged(shipModel, changes);\r\n        }\r\n    }\r\n\r\n    shipDirectionChanged(shipModel, changes) {\r\n        const boardGraphic = this.boardGraphic;\r\n        const ship = boardGraphic.visibleShipsMap.get(shipModel);\r\n        const seed = ship.shipGraphic.element.querySelector('rect');\r\n        const seedBounds = seed.getBoundingClientRect();\r\n        if (!findCellAtPoint(seedBounds.left, seedBounds.top, boardGraphic.grids[0])) {\r\n            return;\r\n        }\r\n        const cellsToOccupy = findCells(seed, boardGraphic.grids[0], changes.direction.newValue);\r\n        shipModel.occupiedCells = cellsToOccupy;\r\n        this.setHighlightedCells(cellsToOccupy, '#00ff00');\r\n        setTimeout(() => {\r\n            this.setHighlightedCells([]);\r\n        }, 250);\r\n    }\r\n\r\n    occupiedCellsChanged(changes) {\r\n        const {oldValue = [], newValue = []} = changes.occupiedCells;\r\n        const occupiedCellsSet = this.player1.occupiedCellsSet;\r\n        for (let i = 0; i < newValue.length; i++){\r\n            occupiedCellsSet.delete(oldValue[i]);\r\n            occupiedCellsSet.add(newValue[i]);\r\n        }\r\n    }\r\n\r\n    setHighlightedCells(cells, color) {\r\n        this.lastHighlightedCells.forEach(cell => {\r\n            cell.style.fill = '';\r\n        });\r\n\r\n        cells.forEach(cell => {\r\n            cell.style.fill = color;\r\n        });\r\n\r\n        this.lastHighlightedCells = cells;\r\n    }\r\n}\r\n\r\nexport default Board;\n\n\n// WEBPACK FOOTER //\n// ./src/js/board/Board.js","import \"./board.scss\";\r\nimport Ship from '../ship/Ship';\r\n\r\nclass BoardGraphic {\r\n    visibleShipsMap = new Map();\r\n    grids = [];\r\n    rendered = false;\r\n\r\n    constructor(ships) {\r\n        this.ships = ships;\r\n    }\r\n\r\n    get element() {\r\n        if (!this._element) {\r\n            const element = document.createElement('section');\r\n            element.id = 'battleshipBoard';\r\n            this._element = element;\r\n        }\r\n        return this._element;\r\n    }\r\n\r\n    renderShips() {\r\n        if (this.rendered) {\r\n            return;\r\n        }\r\n        const fragment = document.createDocumentFragment();\r\n        this.ships.forEach((shipModel, index) => {\r\n            const ship = new Ship(shipModel);\r\n            const element = ship.render();\r\n            fragment.appendChild(element);\r\n            ship.translate(0, 525 + (index * 50));\r\n\r\n            this.visibleShipsMap.set(shipModel, ship);\r\n        });\r\n\r\n        return fragment;\r\n    }\r\n\r\n    render() {\r\n        if (this.rendered) {\r\n            return;\r\n        }\r\n        const element = this.element;\r\n        const fragment = document.createDocumentFragment();\r\n        const player1Grid = document.createElementNS(\"http://www.w3.org/2000/svg\", 'svg');\r\n        player1Grid.id = 'player1Grid';\r\n        player1Grid.setAttribute('width', '500px');\r\n        player1Grid.setAttribute('height', '800px');\r\n\r\n        fragment.appendChild(player1Grid);\r\n        const g = document.createElementNS(\"http://www.w3.org/2000/svg\", 'g');\r\n        player1Grid.appendChild(g);\r\n\r\n        let gridSize = 10;\r\n        while (gridSize--) {\r\n            const path = document.createElementNS(\"http://www.w3.org/2000/svg\", 'path');\r\n            path.setAttribute('d', `M0,0L50,0L50,50L0,50z`);\r\n            path.setAttribute('class', 'cell');\r\n            g.appendChild(path);\r\n        }\r\n        gridSize = 9;\r\n        while (gridSize--) {\r\n            const clone = g.cloneNode(true);\r\n            player1Grid.appendChild(clone);\r\n        }\r\n        const player2Grid = player1Grid.cloneNode(true);\r\n        player2Grid.id = 'player2Grid';\r\n        this.grids.push(player1Grid, player2Grid);\r\n\r\n        fragment.appendChild(player2Grid);\r\n\r\n        player1Grid.appendChild(this.renderShips());\r\n        element.appendChild(fragment);\r\n        this.rendered = true;\r\n        return element;\r\n    }\r\n}\r\n\r\nexport default BoardGraphic;\n\n\n// WEBPACK FOOTER //\n// ./src/js/board/BoardGraphic.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./board.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./board.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./board.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/board/board.scss\n// module id = 7\n// module chunks = 0","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"#player1Grid, #player2Grid {\\n  position: absolute; }\\n  #player1Grid path.cell, #player2Grid path.cell {\\n    transform: translate(225px, 225px);\\n    transition: all .25s ease;\\n    fill: transparent;\\n    stroke: black; }\\n\\n#player1Grid {\\n  left: 2rem; }\\n\\n#player2Grid {\\n  right: 2rem; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader!./src/js/board/board.scss\n// module id = 8\n// module chunks = 0","import ShipGraphic from './ShipGraphic';\r\nimport {findNodeAtPoint} from '../utils/findNodeAtPoint';\r\nimport {alignElementToCell} from '../utils/alignElementToCell';\r\n\r\nclass Ship {\r\n    lastGoodTransform = [];\r\n    dragStartCallback;\r\n    dragCallback;\r\n    dropCallback;\r\n    animationFrame;\r\n\r\n    constructor(shipModel, draggable = true) {\r\n        this.elementMouseDownHandler = this.elementMouseDownHandler.bind(this);\r\n        this.bodyMouseUpHandler = this.bodyMouseUpHandler.bind(this);\r\n        this.bodyMouseMoveHandler = this.bodyMouseMoveHandler.bind(this);\r\n        this.rotateArrowClickHandler = this.rotateArrowClickHandler.bind(this);\r\n        this.modelChangeHandler = this.modelChangeHandler.bind(this);\r\n\r\n        Object.assign(this, {shipModel, draggable});\r\n    }\r\n\r\n    get shipGraphic() {\r\n        if (!this._shipGraphic) {\r\n            this._shipGraphic = new ShipGraphic(this.shipModel);\r\n            this._shipGraphic.rotateArrow.addEventListener('click', this.rotateArrowClickHandler);\r\n        }\r\n        return this._shipGraphic;\r\n    }\r\n\r\n    get shipModel() {\r\n        return this._shipModel;\r\n    }\r\n\r\n    set shipModel(value) {\r\n        if (this._shipModel === value)\r\n            return;\r\n\r\n        if (this._shipModel) {\r\n            this._shipModel.removeChangeListener(this.modelChangeHandler);\r\n        }\r\n        this._shipModel = value;\r\n        if (value) {\r\n            this._shipModel.addChangeListener(this.modelChangeHandler);\r\n        }\r\n    }\r\n\r\n    get draggable() {\r\n        return this._draggable;\r\n    }\r\n\r\n    set draggable(value) {\r\n        value = !!value;\r\n        if (this._draggable === value) {\r\n            return;\r\n        }\r\n        this._draggable = value;\r\n        const element = this.shipGraphic.element;\r\n        if (value) {\r\n            element.setAttribute('draggable', 'true');\r\n            element.addEventListener('mousedown', this.elementMouseDownHandler);\r\n        }\r\n        else {\r\n            element.removeAttribute('draggable');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return this.shipGraphic.render();\r\n    }\r\n\r\n    translate(deltaTx, deltaTy, animate) {\r\n        const shipGraphic = this.shipGraphic;\r\n        const element = shipGraphic.element;\r\n        const {m_transform} = shipGraphic.transform;\r\n        if (animate) {\r\n            if (this.animationFrame){\r\n                cancelAnimationFrame(this.animationFrame);\r\n            }\r\n            const distance = Math.sqrt(Math.pow(deltaTx, 2) + Math.pow(deltaTy, 2));\r\n            let d = distance;\r\n            let lastX = 0;\r\n            let lastY = 0;\r\n            const tick = () => {\r\n                const progress = 1 - (d /= 1.15) / distance;\r\n                const newTx = (deltaTx * progress) - lastX;\r\n                const newTy = (deltaTy * progress) - lastY;\r\n                if (progress < .99999) {\r\n                    this.animationFrame = requestAnimationFrame(tick);\r\n                    lastX += newTx;\r\n                    lastY += newTy;\r\n                }\r\n                m_transform[4] += newTx;\r\n                m_transform[5] += newTy;\r\n                element.setAttribute('transform', `matrix(${m_transform.join(' ')})`);\r\n            };\r\n            tick();\r\n        }\r\n        else {\r\n            m_transform[4] += deltaTx;\r\n            m_transform[5] += deltaTy;\r\n            element.setAttribute('transform', `matrix(${m_transform.join(' ')})`);\r\n        }\r\n    }\r\n\r\n    //------------------------------\r\n    // Event Handlers\r\n    elementMouseDownHandler(event) {\r\n        const shipGraphic = this.shipGraphic;\r\n        if (event.target === shipGraphic.rotateArrow) {\r\n            return;\r\n        }\r\n        document.body.addEventListener('mousemove', this.bodyMouseMoveHandler);\r\n        document.body.addEventListener('mouseup', this.bodyMouseUpHandler);\r\n        this.segment = findNodeAtPoint(event.pageX, event.pageY, this.shipGraphic.shipSegments);\r\n        this.lastMouseEvent = event;\r\n        this.lastGoodTransform = shipGraphic.transform.m_transform.concat();\r\n        if (typeof this.dragStartCallback === 'function') {\r\n            this.dragStartCallback(event, this);\r\n        }\r\n    }\r\n\r\n    bodyMouseMoveHandler(event) {\r\n        if (!event.buttons) {\r\n            this.bodyMouseUpHandler(event);\r\n            return;\r\n        }\r\n        const {pageX:lastPageX, pageY:lastPageY} = this.lastMouseEvent;\r\n        const {pageX, pageY} = event;\r\n        const deltaX = pageX - lastPageX;\r\n        const deltaY = pageY - lastPageY;\r\n\r\n        this.translate(deltaX, deltaY);\r\n        this.lastMouseEvent = event;\r\n        if (typeof this.dragCallback === 'function') {\r\n            this.dragCallback(event, this);\r\n        }\r\n    }\r\n\r\n    bodyMouseUpHandler(event) {\r\n        document.body.removeEventListener('mousemove', this.bodyMouseMoveHandler);\r\n        document.body.removeEventListener('mouseup', this.bodyMouseUpHandler);\r\n        if (typeof this.dropCallback === 'function') {\r\n            this.dropCallback(event, this);\r\n        }\r\n    }\r\n\r\n    rotateArrowClickHandler() {\r\n        this.shipModel.direction = +!this.shipModel.direction;\r\n    }\r\n\r\n    modelChangeHandler(source, changes) {\r\n        if ('direction' in changes) {\r\n            this.directionChanged(changes);\r\n        }\r\n\r\n        if ('occupiedCells' in changes) {\r\n            this.occupiedCellsChanged(source);\r\n        }\r\n\r\n        if ('hits' in changes) {\r\n            this.hitsChanged(source.hits);\r\n        }\r\n    }\r\n\r\n    directionChanged(changes) {\r\n        const transform = this.shipGraphic.transform;\r\n        const direction = changes.direction.newValue;\r\n        const deg = direction === 1 ? 90 : -90;\r\n        transform.rotate(deg, 25, 17.5);\r\n        this.shipGraphic.element.setAttribute('transform', `matrix(${transform.m_transform.join(' ')})`);\r\n    }\r\n\r\n    occupiedCellsChanged(source) {\r\n        const cell = source.occupiedCells[0];\r\n        const m_transform = this.shipGraphic.transform.m_transform;\r\n        if (!cell) {\r\n            const {'4':x1, '5':y1} = m_transform;\r\n            const {'4':x2, '5':y2} = this.lastGoodTransform;\r\n            this.translate(x2 - x1, y2 - y1, true);\r\n        }\r\n        else {\r\n            const {x, y} = alignElementToCell(this.shipGraphic.element, this.shipModel.direction, m_transform, cell);\r\n            console.log(x, y, source.type);\r\n            this.translate(x, y, true);\r\n        }\r\n    }\r\n\r\n    hitsChanged(hits) {\r\n\r\n    }\r\n}\r\n\r\nexport default Ship;\n\n\n// WEBPACK FOOTER //\n// ./src/js/ship/Ship.js","import SVGTransform from 'svg-path-interpolator/src/math/SVGTransform';\r\n\r\nimport rotate from '../svgPaths/rotate';\r\n\r\nimport \"./ship.scss\";\r\n\r\nlet i = 0;\r\nclass ShipGraphic {\r\n    id;\r\n    segment;\r\n    transform = new SVGTransform();\r\n\r\n    constructor(shipModel) {\r\n        this.id = 'ship_' + i++;\r\n        this.shipModel = shipModel;\r\n    }\r\n\r\n    get element() {\r\n        if (!this._element) {\r\n            const element = document.createElementNS(\"http://www.w3.org/2000/svg\", 'g');\r\n            element.id = this.id;\r\n            this._element = element;\r\n        }\r\n        return this._element;\r\n    }\r\n\r\n    get shipSegments() {\r\n        if (!this._shipSegments) {\r\n            this._shipSegments = this.element.querySelectorAll('rect');\r\n        }\r\n\r\n        return this._shipSegments;\r\n    }\r\n\r\n    get rotateArrow() {\r\n        if (!this._roateArrow) {\r\n            const rotateArrow = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n            rotateArrow.id = `rotate_${this.id}`;\r\n            rotateArrow.setAttribute('d', rotate);\r\n            rotateArrow.setAttribute('transform', `translate(${this.shipModel.type.size * 50} 24)`);\r\n            this._roateArrow = rotateArrow;\r\n        }\r\n        return this._roateArrow;\r\n    }\r\n\r\n    render() {\r\n        const element = this.element;\r\n        this.segment = null;\r\n        this._shipSegments = null;\r\n        element.innerHTML = '';\r\n        let {type, hits} = this.shipModel;\r\n        const {size} = type;\r\n        for (let i = 0; i < size; i++) {\r\n            const hit = hits[i];\r\n            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            rect.setAttribute('width', '50');\r\n            rect.setAttribute('height', '35');\r\n            rect.setAttribute('x', '' + i * 50);\r\n            rect.setAttribute('fill', (hit ? '#ff0000' : 'steelblue'));\r\n            element.appendChild(rect);\r\n        }\r\n        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n        text.textContent = '' + type;\r\n        text.setAttribute('font-family', 'Verdana');\r\n        text.setAttribute('font-size', '20');\r\n        text.setAttribute('y', '25');\r\n        element.appendChild(text);\r\n        element.appendChild(this.rotateArrow);\r\n        return element;\r\n    }\r\n}\r\n\r\nexport default ShipGraphic;\n\n\n// WEBPACK FOOTER //\n// ./src/js/ship/ShipGraphic.js","/**\r\n * Javascript adaptation of AffineTransform.ccp from\r\n * https://github.com/WebKit/webkit/blob/66e68cd8d7bf4ea1cf52f31ed9cb242f83ea5b57/Source/WebCore/platform/graphics/transforms/AffineTransform.cpp\r\n */\r\n/*\r\n * Copyright (C) Research In Motion Limited 2010. All rights reserved.\r\n *\r\n * This library is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU Library General Public\r\n * License as published by the Free Software Foundation; either\r\n * version 2 of the License, or (at your option) any later version.\r\n *\r\n * This library is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\r\n * Library General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Library General Public License\r\n * along with this library; see the file COPYING.LIB.  If not, write to\r\n * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,\r\n * Boston, MA 02110-1301, USA.\r\n */\r\n/*\r\n * Copyright (C) 2005, 2006 Apple Inc.  All rights reserved.\r\n *               2010 Dirk Schulze <krit@webkit.org>\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions\r\n * are met:\r\n * 1. Redistributions of source code must retain the above copyright\r\n *    notice, this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\r\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\r\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\r\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\r\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\r\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\nconst degToRads = require('./utils').degToRads;\r\nconst radToDeg = require('./utils').radToDeg;\r\n\r\nclass SVGTransform {\r\n    constructor(a = 1, b = 0, c = 0, d = 1, e = 0, f = 0) {\r\n        this.m_transform = [a, b, c, d, e, f];\r\n    }\r\n\r\n    makeIdentity() {\r\n        this.setMatrix(1, 0, 0, 1, 0, 0);\r\n    }\r\n\r\n    setMatrix(a = 1, b = 0, c = 0, d = 1, e = 0, f = 0) {\r\n        const m_transform = this.m_transform;\r\n        m_transform[0] = a;\r\n        m_transform[1] = b;\r\n        m_transform[2] = c;\r\n        m_transform[3] = d;\r\n        m_transform[4] = e;\r\n        m_transform[5] = f;\r\n    }\r\n\r\n    matrix(a = 1, b = 0, c = 0, d = 1, e = 0, f = 0){\r\n        this.setMatrix(a, b, c, d, e, f);\r\n    }\r\n\r\n    isIdentity() {\r\n        const m_transform = this.m_transform;\r\n\r\n        return (m_transform[0] === 1 && m_transform[1] === 0\r\n        && m_transform[2] === 0 && m_transform[3] === 1\r\n        && m_transform[4] === 0 && m_transform[5] === 0);\r\n    }\r\n\r\n    static det(transform) {\r\n        return transform[0] * transform[3] - transform[1] * transform[2];\r\n    }\r\n\r\n    get xScale() {\r\n        const m_transform = this.m_transform;\r\n\r\n        return Math.sqrt(m_transform[0] * m_transform[0] + m_transform[1] * m_transform[1]);\r\n    }\r\n\r\n    get yScale() {\r\n        const m_transform = this.m_transform;\r\n        return Math.sqrt(m_transform[2] * m_transform[2] + m_transform[3] * m_transform[3]);\r\n    }\r\n\r\n    get isInvertible() {\r\n        const determinant = SVGTransform.det(this.m_transform);\r\n        return Boolean(determinant && isFinite(determinant));\r\n    }\r\n\r\n    inverse() {\r\n        const m_transform = this.m_transform;\r\n        const determinant = SVGTransform.det(m_transform);\r\n        const result = new SVGTransform();\r\n        if (this.isIdentityOrTranslation()) {\r\n            result.m_transform[4] = -m_transform[4];\r\n            result.m_transform[5] = -m_transform[5];\r\n            return result;\r\n        }\r\n\r\n        result.m_transform[0] = m_transform[3] / determinant;\r\n        result.m_transform[1] = -m_transform[1] / determinant;\r\n        result.m_transform[2] = -m_transform[2] / determinant;\r\n        result.m_transform[3] = m_transform[0] / determinant;\r\n        result.m_transform[4] = (m_transform[2] * m_transform[5] - m_transform[3] * m_transform[4]) / determinant;\r\n        result.m_transform[5] = (m_transform[1] * m_transform[4] - m_transform[0] * m_transform[5]) / determinant;\r\n\r\n        return result;\r\n    }\r\n\r\n    isIdentityOrTranslation() {\r\n        const m_transform = this.m_transform;\r\n        return m_transform[0] === 1 && m_transform[1] === 0 && m_transform[2] === 0 && m_transform[3] === 1;\r\n    }\r\n\r\n    multiply(other){\r\n        const m_transform = this.m_transform;\r\n        const trans = new SVGTransform();\r\n        const om_transform = other.m_transform;\r\n        const tm_transform = trans.m_transform;\r\n\r\n        tm_transform[0] = om_transform[0] * m_transform[0] + om_transform[1] * m_transform[2];\r\n        tm_transform[1] = om_transform[0] * m_transform[1] + om_transform[1] * m_transform[3];\r\n        tm_transform[2] = om_transform[2] * m_transform[0] + om_transform[3] * m_transform[2];\r\n        tm_transform[3] = om_transform[2] * m_transform[1] + om_transform[3] * m_transform[3];\r\n        tm_transform[4] = om_transform[4] * m_transform[0] + om_transform[5] * m_transform[2] + m_transform[4];\r\n        tm_transform[5] = om_transform[4] * m_transform[1] + om_transform[5] * m_transform[3] + m_transform[5];\r\n\r\n        this.m_transform = trans.m_transform;\r\n        return this;\r\n    }\r\n\r\n    rotate(degrees, x, y){\r\n        const translateFlag = Boolean(x !== undefined && y !== undefined);\r\n        if (translateFlag){\r\n            this.translate(x, y);\r\n        }\r\n        const rads = degToRads(degrees);\r\n        const cosAngle = Math.cos(rads);\r\n        const sinAngle = Math.sin(rads);\r\n        const rot = new SVGTransform(cosAngle, sinAngle, -sinAngle, cosAngle, 0, 0);\r\n\r\n        this.multiply(rot);\r\n\r\n        if (translateFlag){\r\n            this.translate(-x, -y);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    scale(sx, sy){\r\n        const m_transform = this.m_transform;\r\n        if (sy === undefined){\r\n            sy = sx;\r\n        }\r\n        m_transform[0] *= sx;\r\n        m_transform[1] *= sx;\r\n        m_transform[2] *= sy;\r\n        m_transform[3] *= sy;\r\n\r\n        return this;\r\n    }\r\n\r\n    translate(tx, ty){\r\n        const m_transform = this.m_transform;\r\n        if (this.isIdentityOrTranslation()) {\r\n            m_transform[4] += tx;\r\n            m_transform[5] += ty;\r\n            return this;\r\n        }\r\n\r\n        m_transform[4] += tx * m_transform[0] + ty * m_transform[2];\r\n        m_transform[5] += tx * m_transform[1] + ty * m_transform[3];\r\n        return this;\r\n    }\r\n\r\n    rotateFromVector(x, y){\r\n        return this.rotate(radToDeg(Math.atan2(y, x)));\r\n    }\r\n\r\n    flipX(){\r\n        return this.scale(-1, 1);\r\n    }\r\n\r\n    flipY(){\r\n        return this.scale(1, -1);\r\n    }\r\n\r\n    shear(sx, sy){\r\n        const m_transform = this.m_transform;\r\n        const a = m_transform[0];\r\n        const b = m_transform[1];\r\n\r\n        m_transform[0] += sy * m_transform[2];\r\n        m_transform[1] += sy * m_transform[3];\r\n        m_transform[2] += sx * a;\r\n        m_transform[3] += sx * b;\r\n        return this;\r\n    }\r\n\r\n    skew(angleX, angleY){\r\n        return this.shear(Math.tan(degToRads(angleX)), Math.tan(degToRads(angleY)));\r\n    }\r\n\r\n    skewX(angle){\r\n        return this.shear(Math.tan(degToRads(angle)), 0);\r\n    }\r\n\r\n    skewY(angle){\r\n        return this.shear(0, Math.tan(degToRads(angle)));\r\n    }\r\n\r\n    map(x, y){\r\n        const m_transform = this.m_transform;\r\n        return {\r\n            x: (m_transform[0] * x + m_transform[2] * y + m_transform[4]),\r\n            y: (m_transform[1] * x + m_transform[3] * y + m_transform[5])\r\n        }\r\n    }\r\n\r\n    mapPoint(point){\r\n        return this.map(point.x, point.y);\r\n    }\r\n}\r\nmodule.exports = SVGTransform;\n\n\n// WEBPACK FOOTER //\n// ./~/svg-path-interpolator/src/math/SVGTransform.js","function degToRads(deg){\r\n    return Math.PI * deg / 180;\r\n}\r\n\r\nfunction radToDeg(rad){\r\n    return rad * 180 / Math.PI;\r\n}\r\n\r\nfunction isNullOrUndefined(value){\r\n    return Boolean(value === undefined || value === null);\r\n}\r\n\r\n/**\r\n * Rotates a point around the given origin\r\n * by the specified radians and returns the\r\n * rotated point.\r\n *\r\n * @param originX The x coordinate of the point to rotate around.\r\n * @param originY The y coordinate of the point to rotate around.\r\n * @param x The x coordinate of the point to be rotated.\r\n * @param y The y coordinate of the point to be rotated.\r\n * @param radiansX Radians to rotate along the x axis.\r\n * @param radiansY Radians to rotate along the y axis.\r\n *\r\n * @returns {Object} The point with the rotated coordinates.\r\n */\r\nfunction rotatePoint(originX, originY, x, y, radiansX, radiansY) {\r\n    const v = {x: x - originX, y: y - originY};\r\n    const vx = (v.x * Math.cos(radiansX)) - (v.y * Math.sin(radiansX));\r\n    const vy = (v.x * Math.sin(radiansY)) + (v.y * Math.cos(radiansY));\r\n    return {x: vx + originX, y: vy + originY};\r\n}\r\n\r\n\r\nmodule.exports = {\r\n    degToRads,\r\n    isNullOrUndefined,\r\n    radToDeg,\r\n    rotatePoint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./~/svg-path-interpolator/src/math/utils.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./ship.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./ship.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./ship.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/ship/ship.scss\n// module id = 14\n// module chunks = 0","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"svg g[id^=\\\"ship_\\\"][draggable] {\\n  cursor: move; }\\n  svg g[id^=\\\"ship_\\\"][draggable] path[id^=\\\"rotate_\\\"] {\\n    visibility: visible; }\\n\\nsvg g[id^=\\\"ship_\\\"] text {\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none; }\\n\\nsvg g[id^=\\\"ship_\\\"] path[id^=\\\"rotate_\\\"] {\\n  cursor: pointer;\\n  pointer-events: bounding-box;\\n  visibility: hidden; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader!./src/js/ship/ship.scss\n// module id = 15\n// module chunks = 0","export function findNodeAtPoint(x, y, nodeList) {\r\n    let len = +nodeList.length;\r\n    let i = +0;\r\n    for (; i < len; i++){\r\n        const {left, top, width, height} = nodeList[i].getBoundingClientRect();\r\n        if (x >= left && x <= left + width && y >= top && y <= top + height) {\r\n            break;\r\n        }\r\n    }\r\n    return nodeList[i];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/findNodeAtPoint.js","export function alignElementToCell(element, direction, m_transform, cell) {\r\n    const gridRect = element.parentElement.getBoundingClientRect();\r\n    const cellRect = cell.getBoundingClientRect();\r\n    const offsetHeight = direction ? 50 : 35;\r\n    const offsetWidth = direction ? 35 + 7.5 : 0;\r\n    const x = offsetWidth + (cellRect.left - gridRect.left) - m_transform[4];\r\n    const y = ((cellRect.height - offsetHeight) / 2) + (cellRect.top - gridRect.top) - m_transform[5];\r\n    return {x, y};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/alignElementToCell.js","import {getCell} from './getCell';\r\nexport function findCells(shipSegment, board, direction) {\r\n    if (!shipSegment) {\r\n        return [];\r\n    }\r\n    const shipSegmentRect = shipSegment.getBoundingClientRect();\r\n    const boardRect = board.getBoundingClientRect();\r\n\r\n    const rowNum = ~~((shipSegmentRect.top - boardRect.top) / 50);\r\n    const colNum = ~~((shipSegmentRect.left - boardRect.left) / 50);\r\n    const cells = [];\r\n    let colCursor = colNum;\r\n    let rowCursor = rowNum;\r\n    let thisSegment = shipSegment;\r\n\r\n    while (thisSegment && thisSegment.nodeName === 'rect') {\r\n        const cell = getCell(board, rowCursor, colCursor);\r\n        if (cell) {\r\n            cells.push(cell);\r\n        }\r\n        thisSegment = thisSegment.nextSibling;\r\n        direction ? rowCursor++ : colCursor++;\r\n    }\r\n\r\n    colCursor = colNum;\r\n    rowCursor = rowNum;\r\n    thisSegment = shipSegment;\r\n    while (thisSegment.previousSibling && thisSegment.previousSibling.nodeName === 'rect') {\r\n        direction ? rowCursor-- : colCursor--;\r\n        const cell = getCell(board, rowCursor, colCursor);\r\n        if (cell) {\r\n            cells.unshift(cell);\r\n        }\r\n        thisSegment = thisSegment.previousSibling;\r\n    }\r\n\r\n    return cells;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/findCells.js","export function getCell(board, row, col) {\r\n    if (row > 9 || col > 9) {\r\n        return null;\r\n    }\r\n    return board.children[row].children[col];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/getCell.js","export function findCellAtPoint(x, y, grid) {\r\n    const {top, left} = grid.getBoundingClientRect();\r\n    const cellPt = {x: x - left, y: y - top};\r\n    const colNum = ~~(cellPt.x / 50);\r\n    const rowNum = ~~(cellPt.y / 50);\r\n    if (isNaN(colNum) || rowNum > 9 || colNum > 9 ||\r\n        isNaN(rowNum) || !grid.children[rowNum] || !grid.children[rowNum].children[colNum])\r\n        return null;\r\n\r\n    return grid.children[rowNum].children[colNum];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/findCellAtPoint.js","import {getCell} from './getCell';\r\n\r\nexport function getMoreCellsFromCell(grid, cell, direction, n) {\r\n    const cellRect = cell.getBoundingClientRect();\r\n    const gridRect = grid.getBoundingClientRect();\r\n    let pt = {\r\n        y: ~~((cellRect.top - gridRect.top) / 50),\r\n        x: ~~((cellRect.left - gridRect.left) / 50)\r\n    };\r\n    const axis = direction ? 'y' : 'x';\r\n    const cells = [];\r\n    for (let i = 0; i < n; i++) {\r\n        const targetCell = getCell(grid, pt.y, pt.x);\r\n        if (!targetCell){\r\n            break;\r\n        }\r\n        cells[i] = targetCell;\r\n        pt[axis]++;\r\n    }\r\n    return cells;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/getMoreCellsFromCell.js","import {getHitInfo} from '../utils/getHitInfo';\r\nimport Computer from './Computer';\r\nimport Human from './Human';\r\n\r\nfunction playerModelChangeHandler(source, changes) {\r\n    if (!('incomingShots' in changes)) {\r\n        return;\r\n    }\r\n    const targetCell = changes.incomingShots.newValue[0];\r\n    const hitInfo = getHitInfo(source, targetCell);\r\n    if (hitInfo) {\r\n        const {ship, index} = hitInfo;\r\n        ship.hits = (ship.hits[index] = true, ship.hits).concat();\r\n    }\r\n}\r\n\r\nclass GamePlay {\r\n    grids;\r\n    computer;\r\n    human;\r\n    playerTurn = 0;\r\n\r\n    constructor(grids, player1, player2) {\r\n        Object.assign(this, {grids, player1, player2});\r\n    }\r\n\r\n    get player1() {\r\n        return this._player1;\r\n    }\r\n\r\n    set player1(value) {\r\n        if (this._player1 === value)\r\n            return;\r\n\r\n        if (this._player1) {\r\n            this._player1.removeChangeListener(playerModelChangeHandler);\r\n        }\r\n        this._player1 = value;\r\n        this._player1.addChangeListener(playerModelChangeHandler);\r\n    }\r\n\r\n    get player2() {\r\n        return this._player2;\r\n    }\r\n\r\n    set player2(value) {\r\n        if (this._player2 === value)\r\n            return;\r\n\r\n        if (this._player2) {\r\n            this._player2.removeChangeListener(playerModelChangeHandler);\r\n        }\r\n        this._player2 = value;\r\n        this._player2.addChangeListener(playerModelChangeHandler);\r\n    }\r\n\r\n    startGame() {\r\n        this.human = new Human(this.grids[1], this.grids[0], this.player1);\r\n        this.computer = new Computer(this.grids[0], this.grids[1], this.player2);\r\n    }\r\n}\r\n\r\nexport default GamePlay;\n\n\n// WEBPACK FOOTER //\n// ./src/js/gameplay/GamePlay.js","export function getHitInfo(playerModel, targetCell) {\r\n    const playerShips = playerModel.ships;\r\n    let i = playerShips.length;\r\n    outer:while (i--) {\r\n        const cells = playerShips[i].occupiedCells;\r\n        let j = cells.length;\r\n        while (j--) {\r\n            if (cells[j] === targetCell) {\r\n                return {ship: playerShips[i], index: j};\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/getHitInfo.js","import Player from './Player';\r\nimport {randomizeShips} from '../utils/randomizeShips';\r\n\r\nclass Computer extends Player {\r\n    constructor(...args) {\r\n        super(...args);\r\n        randomizeShips(this.allyGrid, this.playerModel);\r\n    }\r\n}\r\n\r\nexport default Computer;\n\n\n// WEBPACK FOOTER //\n// ./src/js/gameplay/Computer.js","class Player {\r\n    opponentGrid;\r\n    allyGrid;\r\n    playerModel;\r\n\r\n    constructor(opponentGrid, allyGrid, playerModel) {\r\n        Object.assign(this, {opponentGrid, allyGrid, playerModel});\r\n        this.playerModelChanged = this.playerModelChanged.bind(this);\r\n    }\r\n\r\n    yourTurn() {\r\n\r\n    }\r\n\r\n    playerModelChanged(source, changes) {\r\n\r\n    }\r\n}\r\n\r\nexport default Player;\n\n\n// WEBPACK FOOTER //\n// ./src/js/gameplay/Player.js","import {getCell} from '../utils/getCell';\r\n\r\nconst floor = Math.floor;\r\nconst random = Math.random;\r\n\r\nexport function randomizeShips(grid, playerModel) {\r\n    const occupiedCellsSet = playerModel.occupiedCellsSet;\r\n    occupiedCellsSet.forEach(cell =>{\r\n        cell.style.fill = '';\r\n    });\r\n    occupiedCellsSet.clear();\r\n    const shipModels = playerModel.ships;\r\n    shipModels.forEach(shipModel => {\r\n        const {cells, direction} = findUnusedCells(grid, occupiedCellsSet, getRandomStartPoint(), floor(random() * 2), shipModel.type.size);\r\n        if (shipModel.type.size !== cells.length){\r\n            debugger;\r\n        }\r\n        shipModel.occupiedCells = cells;\r\n        shipModel.direction = direction;\r\n        cells.forEach(cell => {\r\n            occupiedCellsSet.add(cell);\r\n            cell.style.fill = 'yellow';\r\n        });\r\n    });\r\n}\r\n\r\nfunction findUnusedCells(board, occupiedCellsSet, pt, direction, n) {\r\n    const axis = direction ? 'y' : 'x';\r\n    if (pt[axis] + n > 9) {\r\n        return findUnusedCells(board, occupiedCellsSet, getRandomStartPoint(), direction, n);\r\n    }\r\n    const cells = [];\r\n    for (let i = 0; i < n; i++) {\r\n        const cell = getCell(board, pt.y, pt.x);\r\n        if (occupiedCellsSet.has(cell)) {\r\n            return findUnusedCells(board, occupiedCellsSet, getRandomStartPoint(), direction, n);\r\n        }\r\n        cells[i] = cell;\r\n        pt[axis]++;\r\n    }\r\n    return {cells, direction: direction};\r\n}\r\n\r\nfunction getRandomStartPoint() {\r\n    return {x: floor(random() * 10), y: floor(random() * 10)};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/randomizeShips.js","import Player from './Player';\r\nimport {randomizeShips} from '../utils/randomizeShips';\r\nclass Human extends Player {\r\n    constructor(...args) {\r\n        super(...args);\r\n        randomizeShips(this.allyGrid, this.playerModel);\r\n    }\r\n}\r\n\r\nexport default Human;\n\n\n// WEBPACK FOOTER //\n// ./src/js/gameplay/Human.js","import {allShipTypes} from '../enum/ShipTypeEnum';\r\nimport ShipModel from './ShipModel';\r\nimport {bindable} from 'bind-property';\r\n\r\nfunction generateDefaultShips() {\r\n    const ships = [];\r\n    allShipTypes.forEach(type => {\r\n        const {maxAllowed} = type;\r\n        for (let i = 0; i < maxAllowed; i++) {\r\n            ships.push(new ShipModel({type}));\r\n        }\r\n    });\r\n    return ships;\r\n}\r\n\r\n@bindable('incomingShots')\r\nclass PlayerModel {\r\n    outboundShots = [];\r\n    incomingShots = [];\r\n    occupiedCellsSet = new Set();\r\n\r\n    get ships() {\r\n        return this._ships || (this._ships = generateDefaultShips());\r\n    }\r\n}\r\n\r\nexport default PlayerModel;\n\n\n// WEBPACK FOOTER //\n// ./src/js/model/PlayerModel.js","export const allShipTypes = [];\r\nclass ShipTypeEnum {\r\n\r\n    size;\r\n    name;\r\n    maxAllowed;\r\n\r\n    constructor(size, name, maxAllowed) {\r\n        if (Object.isFrozen(ShipTypeEnum)) {\r\n            throw new Error('The ShipTypeEnum cannot be constructed');\r\n        }\r\n        Object.assign(this, {size, name, maxAllowed});\r\n        Object.freeze(this);\r\n        allShipTypes.push(this);\r\n    }\r\n\r\n    toString() {\r\n        return this.name;\r\n    }\r\n}\r\nShipTypeEnum.CORVETE = new ShipTypeEnum(2, 'Corvette', 1);\r\nShipTypeEnum.FRIGATE = new ShipTypeEnum(3, 'Frigate', 2);\r\nShipTypeEnum.DESTROYER = new ShipTypeEnum(4, 'Destroyer', 1);\r\nShipTypeEnum.CARRIER = new ShipTypeEnum(5, 'Carrier', 1);\r\n\r\nObject.freeze(ShipTypeEnum);\r\n\r\nexport default ShipTypeEnum;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/enum/ShipTypeEnum.js","import { bindable } from 'bind-property';\r\n\r\n@bindable('hits')\r\n@bindable('direction')\r\n@bindable('occupiedCells')\r\nclass ShipModel {\r\n    hits;\r\n    type;\r\n    direction;\r\n    occupiedCells;\r\n\r\n    constructor({hits = [], type, direction = 0, occupiedCells}) {\r\n        Object.assign(this, {hits, type, direction, occupiedCells});\r\n    }\r\n\r\n    toString() {\r\n        return '' + this.type;\r\n    }\r\n}\r\n\r\nexport default ShipModel;\n\n\n// WEBPACK FOOTER //\n// ./src/js/model/ShipModel.js","const changeListeners = new WeakMap();\r\nconst preCommitListeners = new WeakMap();\r\n/**\r\n * The changeListeners listening for\r\n * property changes.\r\n *\r\n * @return Set\r\n */\r\nexport function getChangeListeners() {\r\n    const self = this;\r\n    if (changeListeners.has(self)) {\r\n        return changeListeners.get(self);\r\n    }\r\n    const callbacks = new Set();\r\n    changeListeners.set(self, callbacks);\r\n\r\n    return callbacks;\r\n}\r\n\r\n/**\r\n * The changeListeners listening for\r\n * pre commit property changes.\r\n *\r\n * @return Set\r\n */\r\nexport function getPreCommitListeners() {\r\n    const self = this;\r\n    if (preCommitListeners.has(self)) {\r\n        return preCommitListeners.get(self);\r\n    }\r\n    const callbacks = new Set();\r\n    preCommitListeners.set(self, callbacks);\r\n\r\n    return callbacks;\r\n}\r\n/**\r\n * Adds a function as a change listener.\r\n * The callback will be provided\r\n *\r\n * @param {function} callback The callback that is notified of property changes.\r\n */\r\nexport function addChangeListener(callback) {\r\n    getChangeListeners.call(this).add(callback);\r\n}\r\n\r\n/**\r\n * Removes a callback that has been previously added\r\n *\r\n * @param {function} callback The callback to remove\r\n */\r\nexport function removeChangeListener(callback) {\r\n    getChangeListeners.call(this).delete(callback);\r\n}\r\n\r\n/**\r\n * Adds a function as a change listener.\r\n * The callback will be provided\r\n *\r\n * @param {function} callback The callback that is notified of property changes.\r\n */\r\nexport function addPreCommitListener(callback) {\r\n    getPreCommitListeners.call(this).add(callback);\r\n}\r\n\r\n/**\r\n * Removes a callback that has been previously added\r\n *\r\n * @param {function} callback The callback to remove\r\n */\r\nexport function removePreCommitListener(callback) {\r\n    getPreCommitListeners.call(this).delete(callback);\r\n}\r\n\r\n/**\r\n * Normalization function for applying values to objects.\r\n *\r\n * @example\r\n *\r\n * // Set complex properties\r\n * applyValue(htmlDiv, 'style.transform', 'translate3d(25px, 25px, 0)');\r\n *\r\n * // call function with arguments\r\n * applyValue(htmlButton, 'setAttribute', ['aria-selected', 'true']);\r\n *\r\n * // call function in context\r\n * applyValue(htmlInput, function(obj){this.value = obj.firstName + ' ' + obj.lastName}, myObject);\r\n *\r\n * @param {Object} targetSource Any object that contains the target path\r\n * @param {string | function} path Can be a string or function\r\n * @param {*} value Any value to apply.  If the path is a function and the\r\n * value is an array, each element is passed as an argument.\r\n */\r\nexport function applyValue(targetSource, path, value) {\r\n    const simple = typeof path !== 'string' || path.indexOf('.') === -1;\r\n    let target = targetSource;\r\n    let context;\r\n    // Check for deep object references\r\n    if (!simple) {\r\n        const paths = path.split('.');\r\n        const len = ~~paths.length;\r\n        let i = ~~0;\r\n        for (; i < len; i++) {\r\n            let fragment = paths[i];\r\n            context = target;\r\n            if (i !== len) {\r\n                target = context[fragment];\r\n            }\r\n        }\r\n    }\r\n    // Check for member properties\r\n    else if (typeof path === 'function' && path in targetSource) {\r\n        target = targetSource[path];\r\n        context = targetSource;\r\n    }\r\n\r\n    // Call function in our target's context\r\n    if (typeof target === 'function') {\r\n        // Faster than value instanceof Array\r\n        if (value && value.splice) {\r\n            target.apply(context, value);\r\n        }\r\n        else {\r\n            target.call(context, value);\r\n        }\r\n    }\r\n    else {\r\n        targetSource[path] = value;\r\n    }\r\n}\r\n\r\nlet changesByObject = new Map();\r\nlet queue = new Set();\r\n\r\nlet nextFrameId;\r\n\r\n/**\r\n * Function used to process property change\r\n * notifications by pooling and then executing\r\n * the notification changeListeners on the next tick.\r\n *\r\n * @param {Object} source The owner of the property being changed\r\n * @param {String} propertyName The name of the property that has changed\r\n * @param {Object} oldValue The value prior to the change\r\n * @param {Object} newValue The value after the change\r\n */\r\nexport function queueNotification(source, propertyName, oldValue, newValue) {\r\n    if (oldValue === newValue) {\r\n        return;\r\n    }\r\n    let info = changesByObject.get(source);\r\n\r\n    if (info === undefined) {\r\n        info = {\r\n            source: source,\r\n            changes: {}\r\n        };\r\n        changesByObject.set(source, info);\r\n    }\r\n    const changes = info.changes;\r\n\r\n    changes[propertyName] = {oldValue, newValue};\r\n    queue.add(source);\r\n    if (nextFrameId) {\r\n        return;\r\n    }\r\n\r\n    nextFrameId = requestAnimationFrame(() => {\r\n        const processingQueue = queue;\r\n        const processingChanges = changesByObject;\r\n        queue = new Set();\r\n        changesByObject = new Map();\r\n        nextFrameId = null; // nullify to enable queuing again\r\n\r\n        processingQueue.forEach(source => {\r\n            const {changes} = processingChanges.get(source);\r\n            notify(source, changes);\r\n        });\r\n    });\r\n}\r\n\r\nexport function mixinNotifier(prototype) {\r\n    Object.defineProperties(prototype, {\r\n        changeListeners: {\r\n            get: getChangeListeners\r\n        },\r\n\r\n        preCommitListeners: {\r\n            get: getPreCommitListeners\r\n        },\r\n        addChangeListener: {value: addChangeListener},\r\n        removeChangeListener: {value: removeChangeListener},\r\n        addPreCommitListener: {value: addPreCommitListener},\r\n        removePreCommitListener: {value: removePreCommitListener},\r\n        suspendNotifications: {value: false, writable: true}\r\n    });\r\n}\r\n\r\n/**\r\n * Notifies all changeListeners that a property has changed.\r\n *\r\n * @param {Object} source The owner of the property\r\n * @param {Object} changes The details of property changes that\r\n * occurred on the context\r\n */\r\nfunction notify(source, changes) {\r\n    source.changeListeners.forEach(callback => {\r\n        callback(source, changes);\r\n    });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/utils.js","import {mixinNotifier, queueNotification, getChangeListeners} from './utils';\r\n\r\nconst activeBindings = new WeakMap();\r\n\r\nfunction createGetter(property) {\r\n\r\n    return function () {\r\n        const self = this;\r\n        return getPropertyValues(self)[property];\r\n    }\r\n}\r\n\r\nfunction createSetter(property, descriptor) {\r\n\r\n    return function (newValue) {\r\n        const self = this;\r\n        const suspendNotifications = self.suspendNotifications;\r\n        let value = getPropertyValues(self)[property];\r\n        // Honor an existing setter if any\r\n        if (typeof descriptor.set === 'function') {\r\n            descriptor.set.call(self, newValue);\r\n            // Mutations? Casts?\r\n            if (descriptor.get) {\r\n                value = descriptor.get.call(self);\r\n            }\r\n        }\r\n        const oldValue = value;\r\n        if (value === newValue || notifyPreCommit(self, {[property]: {oldValue, newValue}})) {\r\n            return;\r\n        }\r\n        value = newValue;\r\n        if (suspendNotifications === false && !getChangeListeners.call(self).values().next().done) {\r\n            queueNotification(self, property, oldValue, newValue);\r\n        }\r\n        getPropertyValues(self)[property] = value;\r\n    }\r\n}\r\n\r\nfunction getPropertyValues(context) {\r\n    if (activeBindings.has(context)) {\r\n        return activeBindings.get(context);\r\n    }\r\n    const values = {};\r\n    activeBindings.set(context, values);\r\n    return values;\r\n}\r\n\r\nfunction notifyPreCommit(source, changes) {\r\n    let canceled = false;\r\n    source.preCommitListeners.forEach(preCommitCallback => {\r\n        canceled = (preCommitCallback(source, changes, canceled) === false) || canceled;\r\n    });\r\n    return canceled;\r\n}\r\n\r\n/**\r\n * Structures the prototype to define a bindable property\r\n * on the first write when \"this\" is an instance of the\r\n * class or prototype.\r\n *\r\n * @param {String} property The name of the property to bind\r\n */\r\nexport function bindable(property) {\r\n    return constructor => {\r\n        // Mixin\r\n        const prototype = constructor.prototype;\r\n        if (!activeBindings.has(prototype)) {\r\n            mixinNotifier(prototype);\r\n            activeBindings.set(prototype, true);\r\n        }\r\n\r\n        const descriptor = Object.getOwnPropertyDescriptor(prototype, property) || {};\r\n        // already bound - nothing to do\r\n        if (activeBindings.has(descriptor.get)) {\r\n            return;\r\n        }\r\n\r\n        Object.defineProperty(prototype, property, {\r\n            get: descriptor.get || createGetter(property),\r\n            set: createSetter(property, descriptor),\r\n            enumerable: descriptor.enumerable\r\n        });\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../src/index.js","export const animateBoard = (boardElement, cellSize, colCt) => {\r\n    cellSize = cellSize | 0;\r\n    colCt = colCt | 0;\r\n    const paths = boardElement.querySelectorAll('.cell');\r\n    const len = ~~paths.length;\r\n    const delay = 250;\r\n    let row = 0;\r\n    for (let i = 0; i < len; i++) {\r\n        const path = paths[i];\r\n        const x = +((i % colCt) * cellSize);\r\n        const y = +(row * cellSize);\r\n        setTimeout(() => {\r\n            path.style.transform = `translate(${x}px, ${y}px)`;\r\n        }, i % row * delay);\r\n\r\n        if (!path.nextSibling) {\r\n            row++;\r\n        }\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/animateBoardRender.js"],"sourceRoot":""}
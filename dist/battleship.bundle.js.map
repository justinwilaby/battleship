{"version":3,"sources":["webpack:///webpack/bootstrap 17ac15dbbe47e7e0849d","webpack:///./src/js/index.js","webpack:///./src/js/main.scss?e92f","webpack:///./src/js/main.scss","webpack:///./~/css-loader/lib/css-base.js","webpack:///./src/fonts/D_Day_Stencil.woff","webpack:///./src/fonts/D_Day_Stencil.ttf","webpack:///./~/style-loader/addStyles.js","webpack:///./src/js/board/Board.js","webpack:///./src/js/board/BoardGraphic.js","webpack:///./src/js/board/board.scss?4901","webpack:///./src/js/board/board.scss","webpack:///./src/js/ship/Ship.js","webpack:///./src/js/ship/ShipGraphic.js","webpack:///./~/svg-path-interpolator/src/math/SVGTransform.js","webpack:///./~/svg-path-interpolator/src/math/utils.js","webpack:///./src/js/ship/ship.scss?177e","webpack:///./src/js/ship/ship.scss","webpack:///./src/js/utils/findNodeAtPoint.js","webpack:///./src/js/utils/alignElementToCell.js","webpack:///./src/js/utils/bindableSetterChanged.js","webpack:///./src/js/utils/findCells.js","webpack:///./src/js/utils/getCell.js","webpack:///./src/js/utils/findCellAtPoint.js","webpack:///./src/js/utils/getMoreCellsFromCell.js","webpack:///./src/js/board/Console.js","webpack:///./src/js/board/console.scss?20ab","webpack:///./src/js/board/console.scss","webpack:///./src/js/utils/randomizeShips.js","webpack:///./src/js/board/_console.html","webpack:///./src/js/gameplay/GamePlay.js","webpack:///./src/js/utils/getHitInfo.js","webpack:///./src/js/gameplay/Computer.js","webpack:///./src/js/gameplay/Player.js","webpack:///./src/js/gameplay/Human.js","webpack:///./src/js/model/GameStateModel.js","webpack:///./src/js/model/PlayerModel.js","webpack:///../../src/utils.js","webpack:///../../src/index.js","webpack:///./src/js/enum/ShipTypeEnum.js","webpack:///./src/js/model/ShipModel.js","webpack:///./src/js/utils/animateBoardRender.js"],"names":["gameStateModel","board","document","body","appendChild","render","grids","boardGraphic","console","forEach","grid","game","module","exports","list","toString","result","i","length","item","push","join","modules","mediaQuery","alreadyImportedModules","id","Board","gameState","shipDragStartCallback","bind","shipDragCallback","shipDropCallback","shipModelChangeListener","shipModelPreCommitListener","player1","player2","Object","assign","element","postRenderActions","visibleShipsMap","shipModel","ship","dragStartCallback","dragCallback","dropCallback","addChangeListener","addPreCommitListener","originEvent","cells","occupiedCells","occupiedCellsSet","delete","cell","setHighlightedCells","segment","direction","validDrop","type","size","has","color","cellsToOccupy","lastHighlightedCells","concat","changes","newValue","allowChange","setTimeout","occupiedCellsChanged","shipDirectionChanged","get","seed","shipGraphic","querySelector","seedBounds","getBoundingClientRect","left","top","oldValue","add","style","fill","_boardGraphic","ships","BoardGraphic","Map","rendered","fragment","createDocumentFragment","index","translate","set","player1Grid","createElementNS","setAttribute","g","gridSize","path","clone","cloneNode","player2Grid","renderShips","_element","createElement","Ship","draggable","elementMouseDownHandler","bodyMouseUpHandler","bodyMouseMoveHandler","rotateArrowClickHandler","modelChangeHandler","deltaTx","deltaTy","animate","m_transform","transform","animationFrame","cancelAnimationFrame","distance","Math","sqrt","pow","d","lastX","lastY","tick","progress","newTx","newTy","requestAnimationFrame","event","target","rotateArrow","addEventListener","pageX","pageY","shipSegments","lastMouseEvent","lastGoodTransform","buttons","lastPageX","lastPageY","deltaX","deltaY","removeEventListener","source","directionChanged","hitsChanged","hits","deg","rotate","x1","y1","x2","y2","x","y","_shipGraphic","_shipModel","value","call","_draggable","removeAttribute","ShipGraphic","_shipSegments","innerHTML","hit","rect","text","textContent","querySelectorAll","_roateArrow","degToRads","require","radToDeg","SVGTransform","a","b","c","e","f","setMatrix","determinant","det","isIdentityOrTranslation","other","trans","om_transform","tm_transform","degrees","translateFlag","Boolean","undefined","rads","cosAngle","cos","sinAngle","sin","rot","multiply","sx","sy","tx","ty","atan2","scale","angleX","angleY","shear","tan","angle","point","map","isFinite","PI","rad","isNullOrUndefined","rotatePoint","originX","originY","radiansX","radiansY","v","vx","vy","findNodeAtPoint","nodeList","len","width","height","alignElementToCell","gridRect","parentElement","cellRect","offsetHeight","offsetWidth","bindableSetterChanged","property","handler","removeChangeListener","findCells","shipSegment","shipSegmentRect","boardRect","rowNum","colNum","colCursor","rowCursor","thisSegment","nodeName","nextSibling","previousSibling","unshift","getCell","row","col","children","findCellAtPoint","cellPt","isNaN","getMoreCellsFromCell","n","pt","axis","targetCell","Console","playerModelChangeHandler","randomizeButtonClickHandler","startGameClickHandler","gameStateChangeHandler","randomizeButton","startGameButton","playerTurnChanged","player","playerTurn","statElements","classList","gameStarted","button","_player1","_player2","_gameState","randomizeShips","floor","random","playerModel","clear","shipModels","findUnusedCells","getRandomStartPoint","incomingShots","hitInfo","GamePlay","startGame","human","computer","getHitInfo","playerShips","outer","j","Computer","args","allyGrid","Player","opponentGrid","playerModelChanged","Human","opponentGridClickHandler","currentTarget","GameStateModel","generateDefaultShips","changeHandler","maxAllowed","PlayerModel","Set","shipModelChangedHandler","allShipsPlaced","_allShipsPlaced","_ships","allShipTypes","totalCells","ShipTypeEnum","name","isFrozen","Error","freeze","CORVETE","FRIGATE","DESTROYER","CARRIER","ShipModel","animateBoard","boardElement","cellSize","colCt","paths","delay"],"mappings":"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,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AAC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","file":"battleship.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 17ac15dbbe47e7e0849d","import \"./main.scss\";\nimport Board from './board/Board';\nimport Console from './board/Console';\nimport GamePlay from './gameplay/GamePlay';\nimport GameStateModel from './model/GameStateModel';\nimport {animateBoard} from './utils/animateBoardRender';\n\nconst gameStateModel = new GameStateModel();\nconst board = new Board(gameStateModel);\ndocument.body.appendChild(board.render());\n\nconst grids = board.boardGraphic.grids;\nconst console = new Console(grids[0], gameStateModel);\ndocument.body.appendChild(console.render());\n\n\ngrids.forEach(grid =>{\n    animateBoard(grid, 50, 10)\n});\n\nconst game = new GamePlay(grids, gameStateModel);\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/index.js!./main.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/index.js!./main.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/index.js!./main.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/main.scss\n// module id = 1\n// module chunks = 0","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"@font-face {\\n  font-family: 'D Day Stencil';\\n  src: url(\" + require(\"../fonts/D_Day_Stencil.woff\") + \") format(\\\"woff\\\"), url(\" + require(\"../fonts/D_Day_Stencil.ttf\") + \") format(\\\"truetype\\\"); }\\n\\nbody {\\n  font-family: D Day Stencil, sans-serif;\\n  background: #333;\\n  overflow: hidden;\\n  padding: 0;\\n  margin: 0;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none; }\\n\\n#battleshipBoard {\\n  position: absolute;\\n  top: 50%;\\n  transform: translateY(-50%);\\n  width: 100%;\\n  height: 800px; }\\n\\nbutton {\\n  font-family: D Day Stencil, sans-serif;\\n  font-size: 25px;\\n  border: 1px solid #2174b9;\\n  background: #8296a7;\\n  border-radius: 10px;\\n  outline: none; }\\n\\nul {\\n  list-style: none;\\n  padding: 0;\\n  margin: 0; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader!./src/js/main.scss\n// module id = 2\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","module.exports = __webpack_public_path__ + \"fonts/D_Day_Stencil.woff\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/fonts/D_Day_Stencil.woff\n// module id = 4\n// module chunks = 0","module.exports = __webpack_public_path__ + \"fonts/D_Day_Stencil.ttf\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/fonts/D_Day_Stencil.ttf\n// module id = 5\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 6\n// module chunks = 0","import BoardGraphic from './BoardGraphic';\nimport {findCells} from '../utils/findCells';\nimport {findCellAtPoint} from '../utils/findCellAtPoint';\nimport {getMoreCellsFromCell} from '../utils/getMoreCellsFromCell';\n\nclass Board {\n\n    lastHighlightedCells = [];\n    validDrop = false;\n    player1;\n    player2;\n\n    constructor(gameState) {\n        this.shipDragStartCallback = this.shipDragStartCallback.bind(this);\n        this.shipDragCallback = this.shipDragCallback.bind(this);\n        this.shipDropCallback = this.shipDropCallback.bind(this);\n        this.shipModelChangeListener = this.shipModelChangeListener.bind(this);\n        this.shipModelPreCommitListener = this.shipModelPreCommitListener.bind(this);\n\n        const {player1, player2} = gameState;\n        Object.assign(this, {player1, player2});\n    }\n\n    get boardGraphic() {\n        if (!this._boardGraphic) {\n            this._boardGraphic = new BoardGraphic(this.player1.ships);\n        }\n        return this._boardGraphic;\n    }\n\n    render() {\n        const element = this.boardGraphic.render();\n        this.postRenderActions();\n        return element;\n    }\n\n    postRenderActions() {\n        this.boardGraphic.visibleShipsMap.forEach(ship => {\n            const shipModel = ship.shipModel;\n            ship.dragStartCallback = this.shipDragStartCallback;\n            ship.dragCallback = this.shipDragCallback;\n            ship.dropCallback = this.shipDropCallback;\n            shipModel.addChangeListener(this.shipModelChangeListener);\n            shipModel.addPreCommitListener(this.shipModelPreCommitListener);\n        });\n    }\n\n    //----------------------------------------\n    // Ship drag callbacks\n    //----------------------------------------\n\n    shipDragStartCallback(originEvent, ship) {\n        const cells = ship.shipModel.occupiedCells || [];\n        if (!cells.length) {\n            return;\n        }\n        cells.forEach(cell => {\n            this.player1.occupiedCellsSet.delete(cell);\n        });\n        this.setHighlightedCells(cells, '#00ff00');\n    }\n\n    shipDragCallback(originEvent, ship) {\n        const cells = findCells(ship.segment, this.boardGraphic.grids[0], ship.shipModel.direction);\n        let i = cells.length;\n        this.validDrop = i === ship.shipModel.type.size;\n        while (i--) {\n            if (this.player1.occupiedCellsSet.has(cells[i])) {\n                this.validDrop = false;\n                break;\n            }\n        }\n        const color = this.validDrop ? '#00ff00' : '#ff0000';\n        this.setHighlightedCells(cells, color);\n    }\n\n    shipDropCallback(originEvent, ship) {\n        let cellsToOccupy = this.lastHighlightedCells;\n        this.setHighlightedCells([]);\n        if (!cellsToOccupy.length) {\n            return;\n        }\n        if (!this.validDrop) {\n            cellsToOccupy = ship.shipModel.occupiedCells || [];\n        }\n        ship.shipModel.occupiedCells = cellsToOccupy.concat();\n    }\n\n    //----------------------------------\n    // Model Change callbacks\n    shipModelPreCommitListener(shipModel, changes) {\n        if (!('direction' in changes)) {\n            return;\n        }\n        const cells = getMoreCellsFromCell(this.boardGraphic.grids[0], shipModel.occupiedCells[0], changes.direction.newValue, shipModel.type.size);\n        let i = ~~cells.length;\n        let allowChange = !i || i === shipModel.type.size;\n        while (allowChange && i-- > 1) {\n            if (this.player1.occupiedCellsSet.has(cells[i])) {\n                allowChange = false;\n            }\n        }\n\n        if (!allowChange && cells.length) {\n            this.setHighlightedCells(cells, '#ff0000');\n            setTimeout(() => {\n                this.setHighlightedCells([]);\n            }, 500);\n        }\n        return allowChange;\n    }\n\n    shipModelChangeListener(shipModel, changes) {\n        if ('occupiedCells' in changes) {\n            this.occupiedCellsChanged(changes);\n        }\n        else if ('direction' in changes) {\n            this.shipDirectionChanged(shipModel, changes);\n        }\n    }\n\n    shipDirectionChanged(shipModel, changes) {\n        const boardGraphic = this.boardGraphic;\n        const ship = boardGraphic.visibleShipsMap.get(shipModel);\n        const seed = ship.shipGraphic.element.querySelector('rect');\n        const seedBounds = seed.getBoundingClientRect();\n        if (!findCellAtPoint(seedBounds.left, seedBounds.top, boardGraphic.grids[0])) {\n            return;\n        }\n        const cellsToOccupy = findCells(seed, boardGraphic.grids[0], changes.direction.newValue);\n        shipModel.occupiedCells = cellsToOccupy;\n        this.setHighlightedCells(cellsToOccupy, '#00ff00');\n        setTimeout(() => {\n            this.setHighlightedCells([]);\n        }, 250);\n    }\n\n    occupiedCellsChanged(changes) {\n        const {oldValue = [], newValue = []} = changes.occupiedCells;\n        const occupiedCellsSet = this.player1.occupiedCellsSet;\n        for (let i = 0; i < newValue.length; i++) {\n            occupiedCellsSet.delete(oldValue[i]);\n            occupiedCellsSet.add(newValue[i]);\n        }\n    }\n\n    setHighlightedCells(cells, color) {\n        this.lastHighlightedCells.forEach(cell => {\n            cell.style.fill = '';\n        });\n\n        cells.forEach(cell => {\n            cell.style.fill = color;\n        });\n\n        this.lastHighlightedCells = cells;\n    }\n}\n\nexport default Board;\n\n\n// WEBPACK FOOTER //\n// ./src/js/board/Board.js","import \"./board.scss\";\nimport Ship from '../ship/Ship';\n\nclass BoardGraphic {\n    visibleShipsMap = new Map();\n    grids = [];\n    rendered = false;\n\n    constructor(ships) {\n        this.ships = ships;\n    }\n\n    get element() {\n        if (!this._element) {\n            const element = document.createElement('section');\n            element.id = 'battleshipBoard';\n            this._element = element;\n        }\n        return this._element;\n    }\n\n    renderShips() {\n        if (this.rendered) {\n            return;\n        }\n        const fragment = document.createDocumentFragment();\n        this.ships.forEach((shipModel, index) => {\n            const ship = new Ship(shipModel);\n            const element = ship.render();\n            fragment.appendChild(element);\n            ship.translate(0, 525 + (index * 50));\n\n            this.visibleShipsMap.set(shipModel, ship);\n        });\n\n        return fragment;\n    }\n\n    render() {\n        if (this.rendered) {\n            return;\n        }\n        const element = this.element;\n        const fragment = document.createDocumentFragment();\n        const player1Grid = document.createElementNS(\"http://www.w3.org/2000/svg\", 'svg');\n        player1Grid.id = 'player1Grid';\n        player1Grid.setAttribute('width', '500px');\n        player1Grid.setAttribute('height', '800px');\n\n        fragment.appendChild(player1Grid);\n        const g = document.createElementNS(\"http://www.w3.org/2000/svg\", 'g');\n        player1Grid.appendChild(g);\n\n        let gridSize = 10;\n        while (gridSize--) {\n            const path = document.createElementNS(\"http://www.w3.org/2000/svg\", 'path');\n            path.setAttribute('d', `M0,0L50,0L50,50L0,50z`);\n            path.setAttribute('class', 'cell');\n            g.appendChild(path);\n        }\n        gridSize = 9;\n        while (gridSize--) {\n            const clone = g.cloneNode(true);\n            player1Grid.appendChild(clone);\n        }\n        const player2Grid = player1Grid.cloneNode(true);\n        player2Grid.id = 'player2Grid';\n        this.grids.push(player1Grid, player2Grid);\n\n        fragment.appendChild(player2Grid);\n\n        player1Grid.appendChild(this.renderShips());\n        element.appendChild(fragment);\n        this.rendered = true;\n        return element;\n    }\n}\n\nexport default BoardGraphic;\n\n\n// WEBPACK FOOTER //\n// ./src/js/board/BoardGraphic.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./board.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./board.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./board.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/board/board.scss\n// module id = 9\n// module chunks = 0","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"#player1Grid, #player2Grid {\\n  position: absolute; }\\n  #player1Grid path.cell, #player2Grid path.cell {\\n    transform: translate(225px, 225px);\\n    transition: all .25s ease;\\n    fill: transparent;\\n    stroke: black; }\\n\\n#player1Grid {\\n  left: 2rem; }\\n\\n#player2Grid {\\n  right: 2rem; }\\n  #player2Grid path.cell:hover {\\n    fill: #ff0000; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader!./src/js/board/board.scss\n// module id = 10\n// module chunks = 0","import ShipGraphic from './ShipGraphic';\nimport {findNodeAtPoint} from '../utils/findNodeAtPoint';\nimport {alignElementToCell} from '../utils/alignElementToCell';\nimport {bindableSetterChanged} from '../utils/bindableSetterChanged';\n\nclass Ship {\n    lastGoodTransform = [];\n    dragStartCallback;\n    dragCallback;\n    dropCallback;\n    animationFrame;\n\n    constructor(shipModel, draggable = true) {\n        this.elementMouseDownHandler = this.elementMouseDownHandler.bind(this);\n        this.bodyMouseUpHandler = this.bodyMouseUpHandler.bind(this);\n        this.bodyMouseMoveHandler = this.bodyMouseMoveHandler.bind(this);\n        this.rotateArrowClickHandler = this.rotateArrowClickHandler.bind(this);\n        this.modelChangeHandler = this.modelChangeHandler.bind(this);\n\n        Object.assign(this, {shipModel, draggable});\n    }\n\n    get shipGraphic() {\n        if (!this._shipGraphic) {\n            this._shipGraphic = new ShipGraphic(this.shipModel);\n            this._shipGraphic.rotateArrow.addEventListener('click', this.rotateArrowClickHandler);\n        }\n        return this._shipGraphic;\n    }\n\n    get shipModel() {\n        return this._shipModel;\n    }\n\n    set shipModel(value) {\n        bindableSetterChanged.call(this, '_shipModel', value, this.modelChangeHandler);\n    }\n\n    get draggable() {\n        return this._draggable;\n    }\n\n    set draggable(value) {\n        value = !!value;\n        if (this._draggable === value) {\n            return;\n        }\n        this._draggable = value;\n        const element = this.shipGraphic.element;\n        if (value) {\n            element.setAttribute('draggable', 'true');\n            element.addEventListener('mousedown', this.elementMouseDownHandler);\n        }\n        else {\n            element.removeAttribute('draggable');\n        }\n    }\n\n    render() {\n        return this.shipGraphic.render();\n    }\n\n    translate(deltaTx, deltaTy, animate) {\n        const shipGraphic = this.shipGraphic;\n        const element = shipGraphic.element;\n        const {m_transform} = shipGraphic.transform;\n        if (animate) {\n            if (this.animationFrame){\n                cancelAnimationFrame(this.animationFrame);\n            }\n            const distance = Math.sqrt(Math.pow(deltaTx, 2) + Math.pow(deltaTy, 2));\n            let d = distance;\n            let lastX = 0;\n            let lastY = 0;\n            const tick = () => {\n                const progress = 1 - (d /= 1.15) / distance;\n                const newTx = (deltaTx * progress) - lastX;\n                const newTy = (deltaTy * progress) - lastY;\n                if (progress < .99999) {\n                    this.animationFrame = requestAnimationFrame(tick);\n                    lastX += newTx;\n                    lastY += newTy;\n                }\n                m_transform[4] += newTx;\n                m_transform[5] += newTy;\n                element.setAttribute('transform', `matrix(${m_transform.join(' ')})`);\n            };\n            tick();\n        }\n        else {\n            m_transform[4] += deltaTx;\n            m_transform[5] += deltaTy;\n            element.setAttribute('transform', `matrix(${m_transform.join(' ')})`);\n        }\n    }\n\n    //------------------------------\n    // Event Handlers\n    elementMouseDownHandler(event) {\n        const shipGraphic = this.shipGraphic;\n        if (event.target === shipGraphic.rotateArrow) {\n            return;\n        }\n        document.body.addEventListener('mousemove', this.bodyMouseMoveHandler);\n        document.body.addEventListener('mouseup', this.bodyMouseUpHandler);\n        this.segment = findNodeAtPoint(event.pageX, event.pageY, this.shipGraphic.shipSegments);\n        this.lastMouseEvent = event;\n        this.lastGoodTransform = shipGraphic.transform.m_transform.concat();\n        if (typeof this.dragStartCallback === 'function') {\n            this.dragStartCallback(event, this);\n        }\n    }\n\n    bodyMouseMoveHandler(event) {\n        if (!event.buttons) {\n            this.bodyMouseUpHandler(event);\n            return;\n        }\n        const {pageX:lastPageX, pageY:lastPageY} = this.lastMouseEvent;\n        const {pageX, pageY} = event;\n        const deltaX = pageX - lastPageX;\n        const deltaY = pageY - lastPageY;\n\n        this.translate(deltaX, deltaY);\n        this.lastMouseEvent = event;\n        if (typeof this.dragCallback === 'function') {\n            this.dragCallback(event, this);\n        }\n    }\n\n    bodyMouseUpHandler(event) {\n        document.body.removeEventListener('mousemove', this.bodyMouseMoveHandler);\n        document.body.removeEventListener('mouseup', this.bodyMouseUpHandler);\n        if (typeof this.dropCallback === 'function') {\n            this.dropCallback(event, this);\n        }\n    }\n\n    rotateArrowClickHandler() {\n        this.shipModel.direction = +!this.shipModel.direction;\n    }\n\n    modelChangeHandler(source, changes) {\n        if ('direction' in changes) {\n            this.directionChanged(changes);\n        }\n\n        if ('occupiedCells' in changes) {\n            this.occupiedCellsChanged(source);\n        }\n\n        if ('hits' in changes) {\n            this.hitsChanged(source.hits);\n        }\n    }\n\n    directionChanged(changes) {\n        const transform = this.shipGraphic.transform;\n        const direction = changes.direction.newValue;\n        const deg = direction === 1 ? 90 : -90;\n        transform.rotate(deg, 25, 17.5);\n        this.shipGraphic.element.setAttribute('transform', `matrix(${transform.m_transform.join(' ')})`);\n    }\n\n    occupiedCellsChanged(source) {\n        const cell = source.occupiedCells[0];\n        const m_transform = this.shipGraphic.transform.m_transform;\n        if (!cell) {\n            const {'4':x1, '5':y1} = m_transform;\n            const {'4':x2, '5':y2} = this.lastGoodTransform;\n            this.translate(x2 - x1, y2 - y1, true);\n        }\n        else {\n            const {x, y} = alignElementToCell(this.shipGraphic.element, this.shipModel.direction, m_transform, cell);\n            this.translate(x, y, true);\n        }\n    }\n\n    hitsChanged(hits) {\n\n    }\n}\n\nexport default Ship;\n\n\n// WEBPACK FOOTER //\n// ./src/js/ship/Ship.js","import SVGTransform from 'svg-path-interpolator/src/math/SVGTransform';\n\nimport rotate from '../svgPaths/rotate';\n\nimport \"./ship.scss\";\n\nlet i = 0;\nclass ShipGraphic {\n    id;\n    segment;\n    transform = new SVGTransform();\n\n    constructor(shipModel) {\n        this.id = 'ship_' + i++;\n        this.shipModel = shipModel;\n    }\n\n    get element() {\n        if (!this._element) {\n            const element = document.createElementNS(\"http://www.w3.org/2000/svg\", 'g');\n            element.id = this.id;\n            this._element = element;\n        }\n        return this._element;\n    }\n\n    get shipSegments() {\n        if (!this._shipSegments) {\n            this._shipSegments = this.element.querySelectorAll('rect');\n        }\n\n        return this._shipSegments;\n    }\n\n    get rotateArrow() {\n        if (!this._roateArrow) {\n            const rotateArrow = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n            rotateArrow.id = `rotate_${this.id}`;\n            rotateArrow.setAttribute('d', rotate);\n            rotateArrow.setAttribute('transform', `translate(${this.shipModel.type.size * 50} 24)`);\n            this._roateArrow = rotateArrow;\n        }\n        return this._roateArrow;\n    }\n\n    render() {\n        const element = this.element;\n        this.segment = null;\n        this._shipSegments = null;\n        element.innerHTML = '';\n        let {type, hits} = this.shipModel;\n        const {size} = type;\n        for (let i = 0; i < size; i++) {\n            const hit = hits[i];\n            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n            rect.setAttribute('width', '50');\n            rect.setAttribute('height', '35');\n            rect.setAttribute('x', '' + i * 50);\n            rect.setAttribute('fill', (hit ? '#ff0000' : 'steelblue'));\n            element.appendChild(rect);\n        }\n        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n        text.textContent = '' + type;\n        text.setAttribute('font-family', 'D Day Stencil');\n        text.setAttribute('font-size', '30');\n        text.setAttribute('y', '28');\n        text.setAttribute('x', '5');\n        element.appendChild(text);\n        element.appendChild(this.rotateArrow);\n        return element;\n    }\n}\n\nexport default ShipGraphic;\n\n\n// WEBPACK FOOTER //\n// ./src/js/ship/ShipGraphic.js","/**\r\n * Javascript adaptation of AffineTransform.ccp from\r\n * https://github.com/WebKit/webkit/blob/66e68cd8d7bf4ea1cf52f31ed9cb242f83ea5b57/Source/WebCore/platform/graphics/transforms/AffineTransform.cpp\r\n */\r\n/*\r\n * Copyright (C) Research In Motion Limited 2010. All rights reserved.\r\n *\r\n * This library is free software; you can redistribute it and/or\r\n * modify it under the terms of the GNU Library General Public\r\n * License as published by the Free Software Foundation; either\r\n * version 2 of the License, or (at your option) any later version.\r\n *\r\n * This library is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\r\n * Library General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Library General Public License\r\n * along with this library; see the file COPYING.LIB.  If not, write to\r\n * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,\r\n * Boston, MA 02110-1301, USA.\r\n */\r\n/*\r\n * Copyright (C) 2005, 2006 Apple Inc.  All rights reserved.\r\n *               2010 Dirk Schulze <krit@webkit.org>\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions\r\n * are met:\r\n * 1. Redistributions of source code must retain the above copyright\r\n *    notice, this list of conditions and the following disclaimer.\r\n * 2. Redistributions in binary form must reproduce the above copyright\r\n *    notice, this list of conditions and the following disclaimer in the\r\n *    documentation and/or other materials provided with the distribution.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\r\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\r\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\r\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\r\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\r\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\r\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\nconst degToRads = require('./utils').degToRads;\r\nconst radToDeg = require('./utils').radToDeg;\r\n\r\nclass SVGTransform {\r\n    constructor(a = 1, b = 0, c = 0, d = 1, e = 0, f = 0) {\r\n        this.m_transform = [a, b, c, d, e, f];\r\n    }\r\n\r\n    makeIdentity() {\r\n        this.setMatrix(1, 0, 0, 1, 0, 0);\r\n    }\r\n\r\n    setMatrix(a = 1, b = 0, c = 0, d = 1, e = 0, f = 0) {\r\n        const m_transform = this.m_transform;\r\n        m_transform[0] = a;\r\n        m_transform[1] = b;\r\n        m_transform[2] = c;\r\n        m_transform[3] = d;\r\n        m_transform[4] = e;\r\n        m_transform[5] = f;\r\n    }\r\n\r\n    matrix(a = 1, b = 0, c = 0, d = 1, e = 0, f = 0){\r\n        this.setMatrix(a, b, c, d, e, f);\r\n    }\r\n\r\n    isIdentity() {\r\n        const m_transform = this.m_transform;\r\n\r\n        return (m_transform[0] === 1 && m_transform[1] === 0\r\n        && m_transform[2] === 0 && m_transform[3] === 1\r\n        && m_transform[4] === 0 && m_transform[5] === 0);\r\n    }\r\n\r\n    static det(transform) {\r\n        return transform[0] * transform[3] - transform[1] * transform[2];\r\n    }\r\n\r\n    get xScale() {\r\n        const m_transform = this.m_transform;\r\n\r\n        return Math.sqrt(m_transform[0] * m_transform[0] + m_transform[1] * m_transform[1]);\r\n    }\r\n\r\n    get yScale() {\r\n        const m_transform = this.m_transform;\r\n        return Math.sqrt(m_transform[2] * m_transform[2] + m_transform[3] * m_transform[3]);\r\n    }\r\n\r\n    get isInvertible() {\r\n        const determinant = SVGTransform.det(this.m_transform);\r\n        return Boolean(determinant && isFinite(determinant));\r\n    }\r\n\r\n    inverse() {\r\n        const m_transform = this.m_transform;\r\n        const determinant = SVGTransform.det(m_transform);\r\n        const result = new SVGTransform();\r\n        if (this.isIdentityOrTranslation()) {\r\n            result.m_transform[4] = -m_transform[4];\r\n            result.m_transform[5] = -m_transform[5];\r\n            return result;\r\n        }\r\n\r\n        result.m_transform[0] = m_transform[3] / determinant;\r\n        result.m_transform[1] = -m_transform[1] / determinant;\r\n        result.m_transform[2] = -m_transform[2] / determinant;\r\n        result.m_transform[3] = m_transform[0] / determinant;\r\n        result.m_transform[4] = (m_transform[2] * m_transform[5] - m_transform[3] * m_transform[4]) / determinant;\r\n        result.m_transform[5] = (m_transform[1] * m_transform[4] - m_transform[0] * m_transform[5]) / determinant;\r\n\r\n        return result;\r\n    }\r\n\r\n    isIdentityOrTranslation() {\r\n        const m_transform = this.m_transform;\r\n        return m_transform[0] === 1 && m_transform[1] === 0 && m_transform[2] === 0 && m_transform[3] === 1;\r\n    }\r\n\r\n    multiply(other){\r\n        const m_transform = this.m_transform;\r\n        const trans = new SVGTransform();\r\n        const om_transform = other.m_transform;\r\n        const tm_transform = trans.m_transform;\r\n\r\n        tm_transform[0] = om_transform[0] * m_transform[0] + om_transform[1] * m_transform[2];\r\n        tm_transform[1] = om_transform[0] * m_transform[1] + om_transform[1] * m_transform[3];\r\n        tm_transform[2] = om_transform[2] * m_transform[0] + om_transform[3] * m_transform[2];\r\n        tm_transform[3] = om_transform[2] * m_transform[1] + om_transform[3] * m_transform[3];\r\n        tm_transform[4] = om_transform[4] * m_transform[0] + om_transform[5] * m_transform[2] + m_transform[4];\r\n        tm_transform[5] = om_transform[4] * m_transform[1] + om_transform[5] * m_transform[3] + m_transform[5];\r\n\r\n        this.m_transform = trans.m_transform;\r\n        return this;\r\n    }\r\n\r\n    rotate(degrees, x, y){\r\n        const translateFlag = Boolean(x !== undefined && y !== undefined);\r\n        if (translateFlag){\r\n            this.translate(x, y);\r\n        }\r\n        const rads = degToRads(degrees);\r\n        const cosAngle = Math.cos(rads);\r\n        const sinAngle = Math.sin(rads);\r\n        const rot = new SVGTransform(cosAngle, sinAngle, -sinAngle, cosAngle, 0, 0);\r\n\r\n        this.multiply(rot);\r\n\r\n        if (translateFlag){\r\n            this.translate(-x, -y);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    scale(sx, sy){\r\n        const m_transform = this.m_transform;\r\n        if (sy === undefined){\r\n            sy = sx;\r\n        }\r\n        m_transform[0] *= sx;\r\n        m_transform[1] *= sx;\r\n        m_transform[2] *= sy;\r\n        m_transform[3] *= sy;\r\n\r\n        return this;\r\n    }\r\n\r\n    translate(tx, ty){\r\n        const m_transform = this.m_transform;\r\n        if (this.isIdentityOrTranslation()) {\r\n            m_transform[4] += tx;\r\n            m_transform[5] += ty;\r\n            return this;\r\n        }\r\n\r\n        m_transform[4] += tx * m_transform[0] + ty * m_transform[2];\r\n        m_transform[5] += tx * m_transform[1] + ty * m_transform[3];\r\n        return this;\r\n    }\r\n\r\n    rotateFromVector(x, y){\r\n        return this.rotate(radToDeg(Math.atan2(y, x)));\r\n    }\r\n\r\n    flipX(){\r\n        return this.scale(-1, 1);\r\n    }\r\n\r\n    flipY(){\r\n        return this.scale(1, -1);\r\n    }\r\n\r\n    shear(sx, sy){\r\n        const m_transform = this.m_transform;\r\n        const a = m_transform[0];\r\n        const b = m_transform[1];\r\n\r\n        m_transform[0] += sy * m_transform[2];\r\n        m_transform[1] += sy * m_transform[3];\r\n        m_transform[2] += sx * a;\r\n        m_transform[3] += sx * b;\r\n        return this;\r\n    }\r\n\r\n    skew(angleX, angleY){\r\n        return this.shear(Math.tan(degToRads(angleX)), Math.tan(degToRads(angleY)));\r\n    }\r\n\r\n    skewX(angle){\r\n        return this.shear(Math.tan(degToRads(angle)), 0);\r\n    }\r\n\r\n    skewY(angle){\r\n        return this.shear(0, Math.tan(degToRads(angle)));\r\n    }\r\n\r\n    map(x, y){\r\n        const m_transform = this.m_transform;\r\n        return {\r\n            x: (m_transform[0] * x + m_transform[2] * y + m_transform[4]),\r\n            y: (m_transform[1] * x + m_transform[3] * y + m_transform[5])\r\n        }\r\n    }\r\n\r\n    mapPoint(point){\r\n        return this.map(point.x, point.y);\r\n    }\r\n}\r\nmodule.exports = SVGTransform;\n\n\n// WEBPACK FOOTER //\n// ./~/svg-path-interpolator/src/math/SVGTransform.js","function degToRads(deg){\r\n    return Math.PI * deg / 180;\r\n}\r\n\r\nfunction radToDeg(rad){\r\n    return rad * 180 / Math.PI;\r\n}\r\n\r\nfunction isNullOrUndefined(value){\r\n    return Boolean(value === undefined || value === null);\r\n}\r\n\r\n/**\r\n * Rotates a point around the given origin\r\n * by the specified radians and returns the\r\n * rotated point.\r\n *\r\n * @param originX The x coordinate of the point to rotate around.\r\n * @param originY The y coordinate of the point to rotate around.\r\n * @param x The x coordinate of the point to be rotated.\r\n * @param y The y coordinate of the point to be rotated.\r\n * @param radiansX Radians to rotate along the x axis.\r\n * @param radiansY Radians to rotate along the y axis.\r\n *\r\n * @returns {Object} The point with the rotated coordinates.\r\n */\r\nfunction rotatePoint(originX, originY, x, y, radiansX, radiansY) {\r\n    const v = {x: x - originX, y: y - originY};\r\n    const vx = (v.x * Math.cos(radiansX)) - (v.y * Math.sin(radiansX));\r\n    const vy = (v.x * Math.sin(radiansY)) + (v.y * Math.cos(radiansY));\r\n    return {x: vx + originX, y: vy + originY};\r\n}\r\n\r\n\r\nmodule.exports = {\r\n    degToRads,\r\n    isNullOrUndefined,\r\n    radToDeg,\r\n    rotatePoint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./~/svg-path-interpolator/src/math/utils.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./ship.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./ship.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./ship.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/ship/ship.scss\n// module id = 16\n// module chunks = 0","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"svg g[id^=\\\"ship_\\\"][draggable] {\\n  cursor: move; }\\n  svg g[id^=\\\"ship_\\\"][draggable] path[id^=\\\"rotate_\\\"] {\\n    visibility: visible; }\\n\\nsvg g[id^=\\\"ship_\\\"] text {\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none; }\\n\\nsvg g[id^=\\\"ship_\\\"] path[id^=\\\"rotate_\\\"] {\\n  cursor: pointer;\\n  pointer-events: bounding-box;\\n  visibility: hidden; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader!./src/js/ship/ship.scss\n// module id = 17\n// module chunks = 0","export function findNodeAtPoint(x, y, nodeList) {\n    let len = +nodeList.length;\n    let i = +0;\n    for (; i < len; i++){\n        const {left, top, width, height} = nodeList[i].getBoundingClientRect();\n        if (x >= left && x <= left + width && y >= top && y <= top + height) {\n            break;\n        }\n    }\n    return nodeList[i];\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/findNodeAtPoint.js","export function alignElementToCell(element, direction, m_transform, cell) {\n    const gridRect = element.parentElement.getBoundingClientRect();\n    const cellRect = cell.getBoundingClientRect();\n    const offsetHeight = direction ? 50 : 35;\n    const offsetWidth = direction ? 35 + 7.5 : 0;\n    const x = offsetWidth + (cellRect.left - gridRect.left) - m_transform[4];\n    const y = ((cellRect.height - offsetHeight) / 2) + (cellRect.top - gridRect.top) - m_transform[5];\n    return {x, y};\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/alignElementToCell.js","export function bindableSetterChanged(property, value, handler){\n    if (this[property] === value)\n        return;\n\n    if (this[property]) {\n        this[property].removeChangeListener(handler);\n    }\n    this[property] = value;\n    this[property].addChangeListener(handler);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/bindableSetterChanged.js","import {getCell} from './getCell';\nexport function findCells(shipSegment, board, direction) {\n    if (!shipSegment) {\n        return [];\n    }\n    const shipSegmentRect = shipSegment.getBoundingClientRect();\n    const boardRect = board.getBoundingClientRect();\n\n    const rowNum = ~~((shipSegmentRect.top - boardRect.top) / 50);\n    const colNum = ~~((shipSegmentRect.left - boardRect.left) / 50);\n    const cells = [];\n    let colCursor = colNum;\n    let rowCursor = rowNum;\n    let thisSegment = shipSegment;\n\n    while (thisSegment && thisSegment.nodeName === 'rect') {\n        const cell = getCell(board, rowCursor, colCursor);\n        if (cell) {\n            cells.push(cell);\n        }\n        thisSegment = thisSegment.nextSibling;\n        direction ? rowCursor++ : colCursor++;\n    }\n\n    colCursor = colNum;\n    rowCursor = rowNum;\n    thisSegment = shipSegment;\n    while (thisSegment.previousSibling && thisSegment.previousSibling.nodeName === 'rect') {\n        direction ? rowCursor-- : colCursor--;\n        const cell = getCell(board, rowCursor, colCursor);\n        if (cell) {\n            cells.unshift(cell);\n        }\n        thisSegment = thisSegment.previousSibling;\n    }\n\n    return cells;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/findCells.js","export function getCell(board, row, col) {\n    if (row > 9 || col > 9) {\n        return null;\n    }\n    return board.children[row].children[col];\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/getCell.js","export function findCellAtPoint(x, y, grid) {\n    const {top, left} = grid.getBoundingClientRect();\n    const cellPt = {x: x - left, y: y - top};\n    const colNum = ~~(cellPt.x / 50);\n    const rowNum = ~~(cellPt.y / 50);\n    if (isNaN(colNum) || rowNum > 9 || colNum > 9 ||\n        isNaN(rowNum) || !grid.children[rowNum] || !grid.children[rowNum].children[colNum])\n        return null;\n\n    return grid.children[rowNum].children[colNum];\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/findCellAtPoint.js","import {getCell} from './getCell';\n\nexport function getMoreCellsFromCell(grid, cell, direction, n) {\n    const cellRect = cell.getBoundingClientRect();\n    const gridRect = grid.getBoundingClientRect();\n    let pt = {\n        y: ~~((cellRect.top - gridRect.top) / 50),\n        x: ~~((cellRect.left - gridRect.left) / 50)\n    };\n    const axis = direction ? 'y' : 'x';\n    const cells = [];\n    for (let i = 0; i < n; i++) {\n        const targetCell = getCell(grid, pt.y, pt.x);\n        if (!targetCell){\n            break;\n        }\n        cells[i] = targetCell;\n        pt[axis]++;\n    }\n    return cells;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/getMoreCellsFromCell.js","import './console.scss';\nimport {randomizeShips} from '../utils/randomizeShips';\nimport {bindableSetterChanged} from '../utils/bindableSetterChanged';\nimport consoleTemplate from './_console.html';\n\nclass Console {\n\n    constructor(grid, gameState) {\n        Object.assign(this, {\n            playerModelChangeHandler: this.playerModelChangeHandler.bind(this),\n            randomizeButtonClickHandler: this.randomizeButtonClickHandler.bind(this),\n            startGameClickHandler: this.startGameClickHandler.bind(this),\n            gameStateChangeHandler: this.gameStateChangeHandler.bind(this),\n\n            grid,\n            gameState\n        });\n    }\n\n    get element() {\n        if (!this._element) {\n            this._element = document.createElement('section');\n            this._element.id = 'console';\n        }\n        return this._element;\n    }\n\n    get player1() {\n        return this._player1;\n    }\n\n    set player1(value) {\n        bindableSetterChanged.call(this, '_player1', value, this.playerModelChangeHandler);\n    }\n\n    get player2() {\n        return this._player2;\n    }\n\n    set player2(value) {\n        bindableSetterChanged.call(this, '_player2', value, this.playerModelChangeHandler);\n    }\n\n    get gameState() {\n        return this._gameState;\n    }\n\n    set gameState(value) {\n        bindableSetterChanged.call(this, '_gameState', value, this.gameStateChangeHandler);\n        const {player1, player2} = (value || {});\n        Object.assign(this, {player1, player2});\n    }\n\n    render() {\n        const element = this.element;\n        element.innerHTML = consoleTemplate;\n        this.postRenderActions();\n        return element;\n    }\n\n    postRenderActions() {\n        const randomizeButton = this.element.querySelector('#randomize');\n        randomizeButton.addEventListener('click', this.randomizeButtonClickHandler);\n\n        const startGameButton = this.element.querySelector('#start');\n        startGameButton.addEventListener('click', this.startGameClickHandler);\n    }\n\n    playerModelChangeHandler(source, changes) {\n\n    }\n\n    gameStateChangeHandler(source, changes) {\n        if ('playerTurn' in changes) {\n            this.playerTurnChanged(changes);\n        }\n    }\n\n    playerTurnChanged(changes) {\n        const player = changes.playerTurn.newValue;\n        const statElements = this.element.querySelectorAll('.stats ul');\n        statElements[0].classList = player === this.player1 ? 'selected' : '';\n        statElements[1].classList = player === this.player2 ? 'selected' : '';\n    }\n\n    randomizeButtonClickHandler() {\n        randomizeShips(this.grid, this.player1);\n    }\n\n    startGameClickHandler(event) {\n        this.gameState.gameStarted = true;\n        this.gameState.playerTurn = this.player1;\n\n        const buttons = this.element.querySelectorAll('#start, #randomize');\n        buttons.forEach(button => button.setAttribute('disabled', ''));\n    }\n}\nexport default Console;\n\n\n// WEBPACK FOOTER //\n// ./src/js/board/Console.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./console.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./console.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/sass-loader/index.js!./console.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/board/console.scss\n// module id = 26\n// module chunks = 0","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"#console {\\n  width: 300px;\\n  position: absolute;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  top: 50%;\\n  z-index: 9999; }\\n  #console .stats {\\n    margin-bottom: 20px;\\n    display: flex; }\\n    #console .stats ul {\\n      color: white;\\n      width: 100%;\\n      font-size: 24px; }\\n      #console .stats ul.selected {\\n        color: green; }\\n      #console .stats ul li:first-of-type {\\n        padding-bottom: 10px;\\n        border-bottom: 1px solid black; }\\n      #console .stats ul + ul {\\n        position: relative;\\n        padding-left: 20px; }\\n        #console .stats ul + ul::before {\\n          content: '';\\n          position: absolute;\\n          border-left: 1px solid black;\\n          height: 100%;\\n          left: 10px; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader!./src/js/board/console.scss\n// module id = 27\n// module chunks = 0","import {getCell} from '../utils/getCell';\n\nconst floor = Math.floor;\nconst random = Math.random;\n\nexport function randomizeShips(grid, playerModel) {\n    const occupiedCellsSet = playerModel.occupiedCellsSet;\n    occupiedCellsSet.clear();\n    const shipModels = playerModel.ships;\n    shipModels.forEach(shipModel => {\n        const {cells, direction} = findUnusedCells(grid, occupiedCellsSet, getRandomStartPoint(), floor(random() * 2), shipModel.type.size);\n        shipModel.occupiedCells = cells;\n        shipModel.direction = direction;\n        cells.forEach(cell => {\n            occupiedCellsSet.add(cell);\n        });\n    });\n}\n\nfunction findUnusedCells(board, occupiedCellsSet, pt, direction, n) {\n    const axis = direction ? 'y' : 'x';\n    if (pt[axis] + n > 9) {\n        return findUnusedCells(board, occupiedCellsSet, getRandomStartPoint(), direction, n);\n    }\n    const cells = [];\n    for (let i = 0; i < n; i++) {\n        const cell = getCell(board, pt.y, pt.x);\n        if (occupiedCellsSet.has(cell)) {\n            return findUnusedCells(board, occupiedCellsSet, getRandomStartPoint(), direction, n);\n        }\n        cells[i] = cell;\n        pt[axis]++;\n    }\n    return {cells, direction: direction};\n}\n\nfunction getRandomStartPoint() {\n    return {x: floor(random() * 10), y: floor(random() * 10)};\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/randomizeShips.js","module.exports = \"<section id=console> <div class=stats> <ul id=player1> <li>Player 1</li> <li>hits: <span>0</span></li> <li>attempts: <span>0</span></li> <li>accuracy: <span>0</span>%</li> </ul> <ul id=player2> <li>Computer</li> <li>hits: <span>0</span></li> <li>attempts: <span>0</span></li> <li>accuracy: <span>0</span>%</li> </ul> </div> <button id=randomize>Randomize Ships</button> <button id=start>Start Game</button> </section>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/board/_console.html\n// module id = 29\n// module chunks = 0","import {getHitInfo} from '../utils/getHitInfo';\nimport {bindableSetterChanged} from '../utils/bindableSetterChanged';\nimport Computer from './Computer';\nimport Human from './Human';\n\nfunction playerModelChangeHandler(source, changes) {\n    if (!('incomingShots' in changes)) {\n        return;\n    }\n    const targetCell = changes.incomingShots.newValue[0];\n    const hitInfo = getHitInfo(source, targetCell);\n    if (hitInfo) {\n        const {ship, index} = hitInfo;\n        ship.hits = (ship.hits[index] = true, ship.hits).concat();\n    }\n}\n\nclass GamePlay {\n    grids;\n    computer;\n    human;\n    playerTurn = 0;\n\n    constructor(grids, gameState) {\n        Object.assign(this, {grids, gameState});\n    }\n\n    get player1() {\n        return this._player1;\n    }\n\n    set player1(value) {\n        bindableSetterChanged.call(this, '_player1', value, playerModelChangeHandler);\n    }\n\n    get player2() {\n        return this._player2;\n    }\n\n    set player2(value) {\n        bindableSetterChanged.call(this, '_player2', value, playerModelChangeHandler);\n    }\n\n    get gameState() {\n        return this._gameState;\n    }\n\n    set gameState(value) {\n        bindableSetterChanged.call(this, '_gameState', value, this.gameStateChangeHandler);\n        const {player1, player2} = (value || {});\n        Object.assign(this, {player1, player2});\n    }\n\n    gameStateChangeHandler(source, changes) {\n        if ('gameStarted' in changes && changes.gameStarted.newValue) {\n            this.startGame();\n        }\n\n        if ('playerTurn' in changes){\n\n        }\n    }\n\n    startGame() {\n        this.human = new Human(this.grids[1], this.grids[0], this.player1);\n        this.computer = new Computer(this.grids[0], this.grids[1], this.player2);\n        this.gameState.playerTurn = this.human;\n    }\n}\n\nexport default GamePlay;\n\n\n// WEBPACK FOOTER //\n// ./src/js/gameplay/GamePlay.js","export function getHitInfo(playerModel, targetCell) {\n    const playerShips = playerModel.ships;\n    let i = playerShips.length;\n    outer:while (i--) {\n        const cells = playerShips[i].occupiedCells;\n        let j = cells.length;\n        while (j--) {\n            if (cells[j] === targetCell) {\n                return {ship: playerShips[i], index: j};\n            }\n        }\n    }\n    return null;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/getHitInfo.js","import Player from './Player';\nimport {randomizeShips} from '../utils/randomizeShips';\n\nclass Computer extends Player {\n    constructor(...args) {\n        super(...args);\n        randomizeShips(this.allyGrid, this.playerModel);\n    }\n}\n\nexport default Computer;\n\n\n// WEBPACK FOOTER //\n// ./src/js/gameplay/Computer.js","class Player {\n    opponentGrid;\n    allyGrid;\n    playerModel;\n\n    constructor(opponentGrid, allyGrid, playerModel) {\n        Object.assign(this, {opponentGrid, allyGrid, playerModel});\n        this.playerModelChanged = this.playerModelChanged.bind(this);\n    }\n\n    playerModelChanged(source, changes) {\n\n    }\n}\n\nexport default Player;\n\n\n// WEBPACK FOOTER //\n// ./src/js/gameplay/Player.js","import Player from './Player';\nimport {findCellAtPoint} from '../utils/findCellAtPoint';\n\nclass Human extends Player {\n    constructor(...args) {\n        super(...args);\n        this.opponentGrid.addEventListener('click', this.opponentGridClickHandler);\n    }\n\n    opponentGridClickHandler(event) {\n        const {pageX, pageY, currentTarget} = event;\n        const cell = findCellAtPoint(pageX, pageY, currentTarget);\n    }\n}\n\nexport default Human;\n\n\n// WEBPACK FOOTER //\n// ./src/js/gameplay/Human.js","import PlayerModel from '../model/PlayerModel';\nimport {bindable} from 'bind-property';\n\n@bindable('gameStarted')\n@bindable('playerTurn')\nclass GameStateModel {\n\n    gameStarted;\n    playerTurn;\n\n    constructor(gameStarted = false, playerTurn = null) {\n        Object.assign(this, {gameStarted, playerTurn});\n    }\n\n    get player1(){\n        return this._player1 || (this._player1 = new PlayerModel());\n    }\n\n    get player2(){\n        return this._player2 || (this._player2 = new PlayerModel());\n    }\n}\n\nexport default GameStateModel;\n\n\n// WEBPACK FOOTER //\n// ./src/js/model/GameStateModel.js","import {bindable, queueNotification} from 'bind-property';\nimport {allShipTypes, totalCells} from '../enum/ShipTypeEnum';\nimport ShipModel from './ShipModel'\n\nfunction generateDefaultShips(changeHandler) {\n    const shipModels = [];\n    allShipTypes.forEach(type => {\n        const {maxAllowed} = type;\n        for (let i = 0; i < maxAllowed; i++) {\n            const shipModel = new ShipModel({type});\n            shipModel.addChangeListener(changeHandler);\n            shipModels.push(shipModel);\n        }\n    });\n    return shipModels;\n}\n\n@bindable('incomingShots')\nclass PlayerModel {\n    outboundShots = [];\n    incomingShots = [];\n    occupiedCellsSet = new Set();\n\n    constructor(){\n        this.shipModelChangedHandler = this.shipModelChangedHandler.bind(this);\n    }\n\n    get ships() {\n        return this._ships || (this._ships = generateDefaultShips(this.shipModelChangedHandler));\n    }\n\n    get allShipsPlaced(){\n        return !!this._allShipsPlaced;\n    }\n\n    shipModelChangedHandler(source, changes){\n        if (!changes.occupiedCells){\n            return;\n        }\n        const newValue = this.occupiedCellsSet.size === totalCells;\n        const oldValue = this.allShipsPlaced;\n        if (oldValue !== newValue){\n            this._allShipsPlaced = newValue;\n            queueNotification(this, 'allShipsPlaced', newValue, oldValue);\n        }\n    }\n}\n\nexport default PlayerModel;\n\n\n// WEBPACK FOOTER //\n// ./src/js/model/PlayerModel.js","const changeListeners = new WeakMap();\nconst preCommitListeners = new WeakMap();\n/**\n * The changeListeners listening for\n * property changes.\n *\n * @return Set\n */\nexport function getChangeListeners() {\n    const self = this;\n    if (changeListeners.has(self)) {\n        return changeListeners.get(self);\n    }\n    const callbacks = new Set();\n    changeListeners.set(self, callbacks);\n\n    return callbacks;\n}\n\n/**\n * The changeListeners listening for\n * pre commit property changes.\n *\n * @return Set\n */\nexport function getPreCommitListeners() {\n    const self = this;\n    if (preCommitListeners.has(self)) {\n        return preCommitListeners.get(self);\n    }\n    const callbacks = new Set();\n    preCommitListeners.set(self, callbacks);\n\n    return callbacks;\n}\n/**\n * Adds a function as a change listener.\n * The callback will be provided\n *\n * @param {function} callback The callback that is notified of property changes.\n */\nexport function addChangeListener(callback) {\n    getChangeListeners.call(this).add(callback);\n}\n\n/**\n * Removes a callback that has been previously added\n *\n * @param {function} callback The callback to remove\n */\nexport function removeChangeListener(callback) {\n    getChangeListeners.call(this).delete(callback);\n}\n\n/**\n * Adds a function as a change listener.\n * The callback will be provided\n *\n * @param {function} callback The callback that is notified of property changes.\n */\nexport function addPreCommitListener(callback) {\n    getPreCommitListeners.call(this).add(callback);\n}\n\n/**\n * Removes a callback that has been previously added\n *\n * @param {function} callback The callback to remove\n */\nexport function removePreCommitListener(callback) {\n    getPreCommitListeners.call(this).delete(callback);\n}\n\n/**\n * Normalization function for applying values to objects.\n *\n * @example\n *\n * // Set complex properties\n * applyValue(htmlDiv, 'style.transform', 'translate3d(25px, 25px, 0)');\n *\n * // call function with arguments\n * applyValue(htmlButton, 'setAttribute', ['aria-selected', 'true']);\n *\n * // call function in context\n * applyValue(htmlInput, function(obj){this.value = obj.firstName + ' ' + obj.lastName}, myObject);\n *\n * @param {Object} targetSource Any object that contains the target path\n * @param {string | function} path Can be a string or function\n * @param {*} value Any value to apply.  If the path is a function and the\n * value is an array, each element is passed as an argument.\n */\nexport function applyValue(targetSource, path, value) {\n    const simple = typeof path !== 'string' || path.indexOf('.') === -1;\n    let target = targetSource;\n    let context;\n    // Check for deep object references\n    if (!simple) {\n        const paths = path.split('.');\n        const len = ~~paths.length;\n        let i = ~~0;\n        for (; i < len; i++) {\n            let fragment = paths[i];\n            context = target;\n            if (i !== len) {\n                target = context[fragment];\n            }\n        }\n    }\n    // Check for member properties\n    else if (typeof path === 'function' && path in targetSource) {\n        target = targetSource[path];\n        context = targetSource;\n    }\n\n    // Call function in our target's context\n    if (typeof target === 'function') {\n        // Faster than value instanceof Array\n        if (value && value.splice) {\n            target.apply(context, value);\n        }\n        else {\n            target.call(context, value);\n        }\n    }\n    else {\n        targetSource[path] = value;\n    }\n}\n\nlet changesByObject = new Map();\nlet queue = new Set();\n\nlet nextFrameId;\n\n/**\n * Function used to process property change\n * notifications by pooling and then executing\n * the notification changeListeners on the next tick.\n *\n * @param {Object} source The owner of the property being changed\n * @param {String} propertyName The name of the property that has changed\n * @param {Object} oldValue The value prior to the change\n * @param {Object} newValue The value after the change\n */\nexport function queueNotification(source, propertyName, oldValue, newValue) {\n    if (oldValue === newValue) {\n        return;\n    }\n    let info = changesByObject.get(source);\n\n    if (info === undefined) {\n        info = {\n            source: source,\n            changes: {}\n        };\n        changesByObject.set(source, info);\n    }\n    const changes = info.changes;\n\n    changes[propertyName] = {oldValue, newValue};\n    queue.add(source);\n    if (nextFrameId) {\n        return;\n    }\n\n    nextFrameId = requestAnimationFrame(() => {\n        const processingQueue = queue;\n        const processingChanges = changesByObject;\n        queue = new Set();\n        changesByObject = new Map();\n        nextFrameId = null; // nullify to enable queuing again\n\n        processingQueue.forEach(source => {\n            const {changes} = processingChanges.get(source);\n            notify(source, changes);\n        });\n    });\n}\n\nexport function mixinNotifier(prototype) {\n    Object.defineProperties(prototype, {\n        changeListeners: {\n            get: getChangeListeners\n        },\n\n        preCommitListeners: {\n            get: getPreCommitListeners\n        },\n        addChangeListener: {value: addChangeListener},\n        removeChangeListener: {value: removeChangeListener},\n        addPreCommitListener: {value: addPreCommitListener},\n        removePreCommitListener: {value: removePreCommitListener},\n        suspendNotifications: {value: false, writable: true}\n    });\n}\n\n/**\n * Notifies all changeListeners that a property has changed.\n *\n * @param {Object} source The owner of the property\n * @param {Object} changes The details of property changes that\n * occurred on the context\n */\nfunction notify(source, changes) {\n    source.changeListeners.forEach(callback => {\n        callback(source, changes);\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ../../src/utils.js","import {mixinNotifier, queueNotification, getChangeListeners} from './utils';\n\nconst activeBindings = new WeakMap();\n\nfunction createGetter(property) {\n\n    return function () {\n        const self = this;\n        return getPropertyValues(self)[property];\n    }\n}\n\nfunction createSetter(property, descriptor) {\n\n    return function (newValue) {\n        const self = this;\n        const suspendNotifications = self.suspendNotifications;\n        let value = getPropertyValues(self)[property];\n        // Honor an existing setter if any\n        if (typeof descriptor.set === 'function') {\n            descriptor.set.call(self, newValue);\n            // Mutations? Casts?\n            if (descriptor.get) {\n                value = descriptor.get.call(self);\n            }\n        }\n        const oldValue = value;\n        if (value === newValue || notifyPreCommit(self, {[property]: {oldValue, newValue}})) {\n            return;\n        }\n        value = newValue;\n        if (suspendNotifications === false && !getChangeListeners.call(self).values().next().done) {\n            queueNotification(self, property, oldValue, newValue);\n        }\n        getPropertyValues(self)[property] = value;\n    }\n}\n\nfunction getPropertyValues(context) {\n    if (activeBindings.has(context)) {\n        return activeBindings.get(context);\n    }\n    const values = {};\n    activeBindings.set(context, values);\n    return values;\n}\n\nfunction notifyPreCommit(source, changes) {\n    let canceled = false;\n    source.preCommitListeners.forEach(preCommitCallback => {\n        canceled = (preCommitCallback(source, changes, canceled) === false) || canceled;\n    });\n    return canceled;\n}\n\n/**\n * Structures the prototype to define a bindable property\n * on the first write when \"this\" is an instance of the\n * class or prototype.\n *\n * @param {String} property The name of the property to bind\n */\nexport function bindable(property) {\n    return constructor => {\n        // Mixin\n        const prototype = constructor.prototype;\n        if (!activeBindings.has(prototype)) {\n            mixinNotifier(prototype);\n            activeBindings.set(prototype, true);\n        }\n\n        const descriptor = Object.getOwnPropertyDescriptor(prototype, property) || {};\n        // already bound - nothing to do\n        if (activeBindings.has(descriptor.get)) {\n            return;\n        }\n\n        Object.defineProperty(prototype, property, {\n            get: descriptor.get || createGetter(property),\n            set: createSetter(property, descriptor),\n            enumerable: descriptor.enumerable\n        });\n    };\n}\nexport {queueNotification};\n\n\n// WEBPACK FOOTER //\n// ../../src/index.js","export const allShipTypes = [];\nexport let totalCells = 0;\nexport class ShipTypeEnum {\n\n    size;\n    name;\n    maxAllowed;\n\n    constructor(size, name, maxAllowed) {\n        if (Object.isFrozen(ShipTypeEnum)) {\n            throw new Error('The ShipTypeEnum cannot be constructed');\n        }\n        Object.assign(this, {size, name, maxAllowed});\n        Object.freeze(this);\n        allShipTypes.push(this);\n        totalCells += size;\n    }\n\n    toString() {\n        return this.name;\n    }\n}\nShipTypeEnum.CORVETE = new ShipTypeEnum(2, 'Corvette', 1);\nShipTypeEnum.FRIGATE = new ShipTypeEnum(3, 'Frigate', 2);\nShipTypeEnum.DESTROYER = new ShipTypeEnum(4, 'Destroyer', 1);\nShipTypeEnum.CARRIER = new ShipTypeEnum(5, 'Carrier', 1);\n\nObject.freeze(ShipTypeEnum);\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/enum/ShipTypeEnum.js","import { bindable } from 'bind-property';\n\n@bindable('hits')\n@bindable('direction')\n@bindable('occupiedCells')\nclass ShipModel {\n    hits;\n    type;\n    direction;\n    occupiedCells;\n\n    constructor({hits = [], type, direction = 0, occupiedCells}) {\n        Object.assign(this, {hits, type, direction, occupiedCells});\n    }\n\n    toString() {\n        return '' + this.type;\n    }\n}\n\nexport default ShipModel;\n\n\n// WEBPACK FOOTER //\n// ./src/js/model/ShipModel.js","export const animateBoard = (boardElement, cellSize, colCt) => {\n    cellSize = cellSize | 0;\n    colCt = colCt | 0;\n    const paths = boardElement.querySelectorAll('.cell');\n    const len = ~~paths.length;\n    const delay = 250;\n    let row = 0;\n    for (let i = 0; i < len; i++) {\n        const path = paths[i];\n        const x = +((i % colCt) * cellSize);\n        const y = +(row * cellSize);\n        setTimeout(() => {\n            path.style.transform = `translate(${x}px, ${y}px)`;\n        }, i % row * delay);\n\n        if (!path.nextSibling) {\n            row++;\n        }\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/animateBoardRender.js"],"sourceRoot":""}